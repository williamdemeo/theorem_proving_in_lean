
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ascii" />
    <title>4. Quantifiers and Equality &#8212; Theorem Proving in Lean 3.4.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="5. Tactics" href="tactics.html" />
    <link rel="prev" title="3. Propositions and Proofs" href="propositions_and_proofs.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="quantifiers-and-equality">
<span id="id1"></span><h1>4. Quantifiers and Equality<a class="headerlink" href="#quantifiers-and-equality" title="Permalink to this headline">&#182;</a></h1>
<p>The last chapter introduced you to methods that construct proofs of statements involving the propositional connectives. In this chapter, we extend the repertoire of logical constructions to include the universal and existential quantifiers, and the equality relation.</p>
<div class="section" id="the-universal-quantifier">
<h2>4.1. The Universal Quantifier<a class="headerlink" href="#the-universal-quantifier" title="Permalink to this headline">&#182;</a></h2>
<p>Notice that if <code class="docutils literal"><span class="pre">&#945;</span></code> is any type, we can represent a unary predicate <code class="docutils literal"><span class="pre">p</span></code> on <code class="docutils literal"><span class="pre">&#945;</span></code> as an object of type <code class="docutils literal"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">Prop</span></code>. In that case, given <code class="docutils literal"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;</span></code>, <code class="docutils literal"><span class="pre">p</span> <span class="pre">x</span></code> denotes the assertion that <code class="docutils literal"><span class="pre">p</span></code> holds of <code class="docutils literal"><span class="pre">x</span></code>. Similarly, an object <code class="docutils literal"><span class="pre">r</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">Prop</span></code> denotes a binary relation on <code class="docutils literal"><span class="pre">&#945;</span></code>: given <code class="docutils literal"><span class="pre">x</span> <span class="pre">y</span> <span class="pre">:</span> <span class="pre">&#945;</span></code>, <code class="docutils literal"><span class="pre">r</span> <span class="pre">x</span> <span class="pre">y</span></code> denotes the assertion that <code class="docutils literal"><span class="pre">x</span></code> is related to <code class="docutils literal"><span class="pre">y</span></code>.</p>
<p>The universal quantifier, <code class="docutils literal"><span class="pre">&#8704;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">x</span></code> is supposed to denote the assertion that &#8220;for every <code class="docutils literal"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;</span></code>, <code class="docutils literal"><span class="pre">p</span> <span class="pre">x</span></code>&#8221; holds. As with the propositional connectives, in systems of natural deduction, &#8220;forall&#8221; is governed by an introduction and elimination rule. Informally, the introduction rule states:</p>
<blockquote>
<div>Given a proof of <code class="docutils literal"><span class="pre">p</span> <span class="pre">x</span></code>, in a context where <code class="docutils literal"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> is arbitrary, we obtain a proof <code class="docutils literal"><span class="pre">&#8704;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">x</span></code>.</div></blockquote>
<p>The elimination rule states:</p>
<blockquote>
<div>Given a proof <code class="docutils literal"><span class="pre">&#8704;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">x</span></code> and any term <code class="docutils literal"><span class="pre">t</span> <span class="pre">:</span> <span class="pre">&#945;</span></code>, we obtain a proof of <code class="docutils literal"><span class="pre">p</span> <span class="pre">t</span></code>.</div></blockquote>
<p>As was the case for implication, the propositions-as-types interpretation now comes into play. Remember the introduction and elimination rules for Pi types:</p>
<blockquote>
<div>Given a term <code class="docutils literal"><span class="pre">t</span></code> of type <code class="docutils literal"><span class="pre">&#946;</span> <span class="pre">x</span></code>, in a context where <code class="docutils literal"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> is arbitrary, we have <code class="docutils literal"><span class="pre">(&#955;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">t)</span> <span class="pre">:</span> <span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span> <span class="pre">x</span></code>.</div></blockquote>
<p>The elimination rule states:</p>
<blockquote>
<div>Given a term <code class="docutils literal"><span class="pre">s</span> <span class="pre">:</span> <span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span> <span class="pre">x</span></code> and any term <code class="docutils literal"><span class="pre">t</span> <span class="pre">:</span> <span class="pre">&#945;</span></code>, we have <code class="docutils literal"><span class="pre">s</span> <span class="pre">t</span> <span class="pre">:</span> <span class="pre">&#946;</span> <span class="pre">t</span></code>.</div></blockquote>
<p>In the case where <code class="docutils literal"><span class="pre">p</span> <span class="pre">x</span></code> has type <code class="docutils literal"><span class="pre">Prop</span></code>, if we replace <code class="docutils literal"><span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span> <span class="pre">x</span></code> with <code class="docutils literal"><span class="pre">&#8704;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">x</span></code>, we can read these as the correct rules for building proofs involving the universal quantifier.</p>
<p>The Calculus of Constructions therefore identifies <code class="docutils literal"><span class="pre">&#928;</span></code> and <code class="docutils literal"><span class="pre">&#8704;</span></code> in this way. If <code class="docutils literal"><span class="pre">p</span></code> is any expression, <code class="docutils literal"><span class="pre">&#8704;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span></code> is nothing more than alternative notation for <code class="docutils literal"><span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span></code>, with the idea that the former is more natural than the latter in cases where <code class="docutils literal"><span class="pre">p</span></code> is a proposition. Typically, the expression <code class="docutils literal"><span class="pre">p</span></code> will depend on <code class="docutils literal"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;</span></code>. Recall that, in the case of ordinary function spaces, we could interpret <code class="docutils literal"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code> as the special case of <code class="docutils literal"><span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span></code> in which <code class="docutils literal"><span class="pre">&#946;</span></code> does not depend on <code class="docutils literal"><span class="pre">x</span></code>. Similarly, we can think of an implication <code class="docutils literal"><span class="pre">p</span> <span class="pre">&#8594;</span> <span class="pre">q</span></code> between propositions as the special case of <code class="docutils literal"><span class="pre">&#8704;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">p,</span> <span class="pre">q</span></code> in which the expression <code class="docutils literal"><span class="pre">q</span></code> does not depend on <code class="docutils literal"><span class="pre">x</span></code>.</p>
<p>Here is an example of how the propositions-as-types correspondence gets put into practice.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(%CE%B1%20:%20Type)%20(p%20q%20:%20%CE%B1%20%E2%86%92%20Prop)%0A%0Aexample%20:%20(%E2%88%80%20x%20:%20%CE%B1,%20p%20x%20%E2%88%A7%20q%20x)%20%E2%86%92%20%E2%88%80%20y%20:%20%CE%B1,%20p%20y%20%20:=%0Aassume%20h%20:%20%E2%88%80%20x%20:%20%CE%B1,%20p%20x%20%E2%88%A7%20q%20x,%0Aassume%20y%20:%20%CE%B1,%0Ashow%20p%20y,%20from%20(h%20y).left" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="bp">&#8704;</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">,</span> <span class="n">p</span> <span class="n">y</span>  <span class="o">:=</span>
<span class="k">assume</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">q</span> <span class="n">x</span><span class="o">,</span>
<span class="k">assume</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">,</span>
<span class="k">show</span> <span class="n">p</span> <span class="n">y</span><span class="o">,</span> <span class="k">from</span> <span class="o">(</span><span class="n">h</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">left</span>
</pre></div>
</div>
</div><p>As a notational convention, we give the universal quantifier the widest scope possible, so parentheses are needed to limit the quantifier over <code class="docutils literal"><span class="pre">x</span></code> to the hypothesis in the example above. The canonical way to prove <code class="docutils literal"><span class="pre">&#8704;</span> <span class="pre">y</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">y</span></code> is to take an arbitrary <code class="docutils literal"><span class="pre">y</span></code>, and prove <code class="docutils literal"><span class="pre">p</span> <span class="pre">y</span></code>. This is the introduction rule. Now, given that <code class="docutils literal"><span class="pre">h</span></code> has type <code class="docutils literal"><span class="pre">&#8704;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">x</span> <span class="pre">&#8743;</span> <span class="pre">q</span> <span class="pre">x</span></code>, the expression <code class="docutils literal"><span class="pre">h</span> <span class="pre">y</span></code> has type <code class="docutils literal"><span class="pre">p</span> <span class="pre">y</span> <span class="pre">&#8743;</span> <span class="pre">q</span> <span class="pre">y</span></code>. This is the elimination rule. Taking the left conjunct gives the desired conclusion, <code class="docutils literal"><span class="pre">p</span> <span class="pre">y</span></code>.</p>
<p>Remember that expressions which differ up to renaming of bound variables are considered to be equivalent. So, for example, we could have used the same variable, <code class="docutils literal"><span class="pre">x</span></code>, in both the hypothesis and conclusion, and instantiated it by a different variable, <code class="docutils literal"><span class="pre">z</span></code>, in the proof:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(%CE%B1%20:%20Type)%20(p%20q%20:%20%CE%B1%20%E2%86%92%20Prop)%0A%0A--%20BEGIN%0Aexample%20:%20(%E2%88%80%20x%20:%20%CE%B1,%20p%20x%20%E2%88%A7%20q%20x)%20%E2%86%92%20%E2%88%80%20x%20:%20%CE%B1,%20p%20x%20%20:=%0Aassume%20h%20:%20%E2%88%80%20x%20:%20%CE%B1,%20p%20x%20%E2%88%A7%20q%20x,%0Aassume%20z%20:%20%CE%B1,%0Ashow%20p%20z,%20from%20and.elim_left%20(h%20z)%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span>  <span class="o">:=</span>
<span class="k">assume</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">q</span> <span class="n">x</span><span class="o">,</span>
<span class="k">assume</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">,</span>
<span class="k">show</span> <span class="n">p</span> <span class="n">z</span><span class="o">,</span> <span class="k">from</span> <span class="n">and.elim_left</span> <span class="o">(</span><span class="n">h</span> <span class="n">z</span><span class="o">)</span>
</pre></div>
</div>
</div><p>As another example, here is how we can express the fact that a relation, <code class="docutils literal"><span class="pre">r</span></code>, is transitive:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(%CE%B1%20:%20Type)%20(r%20:%20%CE%B1%20%E2%86%92%20%CE%B1%20%E2%86%92%20Prop)%0Avariable%20%20trans_r%20:%20%E2%88%80%20x%20y%20z,%20r%20x%20y%20%E2%86%92%20r%20y%20z%20%E2%86%92%20r%20x%20z%0A%0Avariables%20a%20b%20c%20:%20%CE%B1%0Avariables%20(hab%20:%20r%20a%20b)%20(hbc%20:%20r%20b%20c)%0A%0A#check%20trans_r%20%20%20%20--%20%E2%88%80%20(x%20y%20z%20:%20%CE%B1),%20r%20x%20y%20%E2%86%92%20r%20y%20z%20%E2%86%92%20r%20x%20z%0A#check%20trans_r%20a%20b%20c%0A#check%20trans_r%20a%20b%20c%20hab%0A#check%20trans_r%20a%20b%20c%20hab%20hbc" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="kd">variable</span>  <span class="n">trans_r</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="o">,</span> <span class="n">r</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">&#8594;</span> <span class="n">r</span> <span class="n">y</span> <span class="n">z</span> <span class="bp">&#8594;</span> <span class="n">r</span> <span class="n">x</span> <span class="n">z</span>

<span class="kd">variables</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#945;</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">hab</span> <span class="o">:</span> <span class="n">r</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">hbc</span> <span class="o">:</span> <span class="n">r</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span>

<span class="k">#check</span> <span class="n">trans_r</span>    <span class="c1">-- &#8704; (x y z : &#945;), r x y &#8594; r y z &#8594; r x z</span>
<span class="k">#check</span> <span class="n">trans_r</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>
<span class="k">#check</span> <span class="n">trans_r</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">hab</span>
<span class="k">#check</span> <span class="n">trans_r</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">hab</span> <span class="n">hbc</span>
</pre></div>
</div>
</div><p>Think about what is going on here. When we instantiate <code class="docutils literal"><span class="pre">trans_r</span></code> at the values <code class="docutils literal"><span class="pre">a</span> <span class="pre">b</span> <span class="pre">c</span></code>, we end up with a proof of <code class="docutils literal"><span class="pre">r</span> <span class="pre">a</span> <span class="pre">b</span> <span class="pre">&#8594;</span> <span class="pre">r</span> <span class="pre">b</span> <span class="pre">c</span> <span class="pre">&#8594;</span> <span class="pre">r</span> <span class="pre">a</span> <span class="pre">c</span></code>. Applying this to the &#8220;hypothesis&#8221; <code class="docutils literal"><span class="pre">hab</span> <span class="pre">:</span> <span class="pre">r</span> <span class="pre">a</span> <span class="pre">b</span></code>, we get a proof of the implication <code class="docutils literal"><span class="pre">r</span> <span class="pre">b</span> <span class="pre">c</span> <span class="pre">&#8594;</span> <span class="pre">r</span> <span class="pre">a</span> <span class="pre">c</span></code>. Finally, applying it to the hypothesis <code class="docutils literal"><span class="pre">hbc</span></code> yields a proof of the conclusion <code class="docutils literal"><span class="pre">r</span> <span class="pre">a</span> <span class="pre">c</span></code>.</p>
<p>In situations like this, it can be tedious to supply the arguments <code class="docutils literal"><span class="pre">a</span> <span class="pre">b</span> <span class="pre">c</span></code>, when they can be inferred from <code class="docutils literal"><span class="pre">hab</span> <span class="pre">hbc</span></code>. For that reason, it is common to make these arguments implicit:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=universe%20u%0Avariables%20(%CE%B1%20:%20Type%20u)%20(r%20:%20%CE%B1%20%E2%86%92%20%CE%B1%20%E2%86%92%20Prop)%0Avariable%20%20trans_r%20:%20%E2%88%80%20%7Bx%20y%20z%7D,%20r%20x%20y%20%E2%86%92%20r%20y%20z%20%E2%86%92%20r%20x%20z%0A%0Avariables%20(a%20b%20c%20:%20%CE%B1)%0Avariables%20(hab%20:%20r%20a%20b)%20(hbc%20:%20r%20b%20c)%0A%0A#check%20trans_r%0A#check%20trans_r%20hab%0A#check%20trans_r%20hab%20hbc" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">universe</span> <span class="n">u</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="kd">variable</span>  <span class="n">trans_r</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="o">},</span> <span class="n">r</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">&#8594;</span> <span class="n">r</span> <span class="n">y</span> <span class="n">z</span> <span class="bp">&#8594;</span> <span class="n">r</span> <span class="n">x</span> <span class="n">z</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">hab</span> <span class="o">:</span> <span class="n">r</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">hbc</span> <span class="o">:</span> <span class="n">r</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span>

<span class="k">#check</span> <span class="n">trans_r</span>
<span class="k">#check</span> <span class="n">trans_r</span> <span class="n">hab</span>
<span class="k">#check</span> <span class="n">trans_r</span> <span class="n">hab</span> <span class="n">hbc</span>
</pre></div>
</div>
</div><p>The advantage is that we can simply write <code class="docutils literal"><span class="pre">trans_r</span> <span class="pre">hab</span> <span class="pre">hbc</span></code> as a proof of <code class="docutils literal"><span class="pre">r</span> <span class="pre">a</span> <span class="pre">c</span></code>. A disadvantage is that Lean does not have enough information to infer the types of the arguments in the expressions <code class="docutils literal"><span class="pre">trans_r</span></code> and <code class="docutils literal"><span class="pre">trans_r</span> <span class="pre">hab</span></code>. The output of the first <code class="docutils literal"><span class="pre">#check</span></code> command is <code class="docutils literal"><span class="pre">r</span> <span class="pre">?M_1</span> <span class="pre">?M_2</span> <span class="pre">&#8594;</span> <span class="pre">r</span> <span class="pre">?M_2</span> <span class="pre">?M_3</span> <span class="pre">&#8594;</span> <span class="pre">r</span> <span class="pre">?M_1</span> <span class="pre">?M_3</span></code>, indicating that the implicit arguments are unspecified in this case.</p>
<p>Here is an example of how we can carry out elementary reasoning with an equivalence relation:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(%CE%B1%20:%20Type)%20(r%20:%20%CE%B1%20%E2%86%92%20%CE%B1%20%E2%86%92%20Prop)%0A%0Avariable%20refl_r%20:%20%E2%88%80%20x,%20r%20x%20x%0Avariable%20symm_r%20:%20%E2%88%80%20%7Bx%20y%7D,%20r%20x%20y%20%E2%86%92%20r%20y%20x%0Avariable%20trans_r%20:%20%E2%88%80%20%7Bx%20y%20z%7D,%20r%20x%20y%20%E2%86%92%20r%20y%20z%20%E2%86%92%20r%20x%20z%0A%0Aexample%20(a%20b%20c%20d%20:%20%CE%B1)%20(hab%20:%20r%20a%20b)%20(hcb%20:%20r%20c%20b)%20(hcd%20:%20r%20c%20d)%20:%0A%20%20r%20a%20d%20:=%0Atrans_r%20(trans_r%20hab%20(symm_r%20hcb))%20hcd" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kd">variable</span> <span class="n">refl_r</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">r</span> <span class="n">x</span> <span class="n">x</span>
<span class="kd">variable</span> <span class="n">symm_r</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span><span class="o">},</span> <span class="n">r</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">&#8594;</span> <span class="n">r</span> <span class="n">y</span> <span class="n">x</span>
<span class="kd">variable</span> <span class="n">trans_r</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="o">},</span> <span class="n">r</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">&#8594;</span> <span class="n">r</span> <span class="n">y</span> <span class="n">z</span> <span class="bp">&#8594;</span> <span class="n">r</span> <span class="n">x</span> <span class="n">z</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span> <span class="o">(</span><span class="n">hab</span> <span class="o">:</span> <span class="n">r</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">hcb</span> <span class="o">:</span> <span class="n">r</span> <span class="n">c</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">hcd</span> <span class="o">:</span> <span class="n">r</span> <span class="n">c</span> <span class="n">d</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">r</span> <span class="n">a</span> <span class="n">d</span> <span class="o">:=</span>
<span class="n">trans_r</span> <span class="o">(</span><span class="n">trans_r</span> <span class="n">hab</span> <span class="o">(</span><span class="n">symm_r</span> <span class="n">hcb</span><span class="o">))</span> <span class="n">hcd</span>
</pre></div>
</div>
</div><p>To get used to using universal quantifiers, you should try some of the exercises at the end of this section.</p>
<p>It is the typing rule for Pi types, and the universal quantifier in particular, that distinguishes <code class="docutils literal"><span class="pre">Prop</span></code> from other types. Suppose we have <code class="docutils literal"><span class="pre">&#945;</span> <span class="pre">:</span> <span class="pre">Sort</span> <span class="pre">i</span></code> and <code class="docutils literal"><span class="pre">&#946;</span> <span class="pre">:</span> <span class="pre">Sort</span> <span class="pre">j</span></code>, where the expression <code class="docutils literal"><span class="pre">&#946;</span></code> may depend on a variable <code class="docutils literal"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;</span></code>. Then <code class="docutils literal"><span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span></code> is an element of <code class="docutils literal"><span class="pre">Type</span> <span class="pre">(imax</span> <span class="pre">i</span> <span class="pre">j)</span></code>, where <code class="docutils literal"><span class="pre">imax</span> <span class="pre">i</span> <span class="pre">j</span></code> is the maximum of <code class="docutils literal"><span class="pre">i</span></code> and <code class="docutils literal"><span class="pre">j</span></code> if <code class="docutils literal"><span class="pre">j</span></code> is not 0, and 0 otherwise.</p>
<p>The idea is as follows. If <code class="docutils literal"><span class="pre">j</span></code> is not <code class="docutils literal"><span class="pre">0</span></code>, then <code class="docutils literal"><span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span></code> is an element of <code class="docutils literal"><span class="pre">Sort</span> <span class="pre">(max</span> <span class="pre">i</span> <span class="pre">j)</span></code>. In other words, the type of dependent functions from <code class="docutils literal"><span class="pre">&#945;</span></code> to <code class="docutils literal"><span class="pre">&#946;</span></code> &#8220;lives&#8221; in the universe whose index is the maximum of <code class="docutils literal"><span class="pre">i</span></code> and <code class="docutils literal"><span class="pre">j</span></code>. Suppose, however, that <code class="docutils literal"><span class="pre">&#946;</span></code> is of <code class="docutils literal"><span class="pre">Sort</span> <span class="pre">0</span></code>, that is, an element of <code class="docutils literal"><span class="pre">Prop</span></code>. In that case, <code class="docutils literal"><span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span></code> is an element of <code class="docutils literal"><span class="pre">Sort</span> <span class="pre">0</span></code> as well, no matter which type universe <code class="docutils literal"><span class="pre">&#945;</span></code> lives in. In other words, if <code class="docutils literal"><span class="pre">&#946;</span></code> is a proposition depending on <code class="docutils literal"><span class="pre">&#945;</span></code>, then <code class="docutils literal"><span class="pre">&#8704;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span></code> is again a proposition. This reflects the interpretation of <code class="docutils literal"><span class="pre">Prop</span></code> as the type of propositions rather than data, and it is what makes <code class="docutils literal"><span class="pre">Prop</span></code> <em>impredicative</em>.</p>
<p>The term &#8220;predicative&#8221; stems from foundational developments around the turn of the twentieth century, when logicians such as Poincar&#233; and Russell blamed set-theoretic paradoxes on the &#8220;vicious circles&#8221; that arise when we define a property by quantifying over a collection that includes the very property being defined. Notice that if <code class="docutils literal"><span class="pre">&#945;</span></code> is any type, we can form the type <code class="docutils literal"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">Prop</span></code> of all predicates on <code class="docutils literal"><span class="pre">&#945;</span></code> (the &#8220;power type of <code class="docutils literal"><span class="pre">&#945;</span></code>&#8221;). The impredicativity of Prop means that we can form propositions that quantify over <code class="docutils literal"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">Prop</span></code>. In particular, we can define predicates on <code class="docutils literal"><span class="pre">&#945;</span></code> by quantifying over all predicates on <code class="docutils literal"><span class="pre">&#945;</span></code>, which is exactly the type of circularity that was once considered
problematic.</p>
</div>
<div class="section" id="equality">
<span id="id2"></span><h2>4.2. Equality<a class="headerlink" href="#equality" title="Permalink to this headline">&#182;</a></h2>
<p>Let us now turn to one of the most fundamental relations defined in Lean&#8217;s library, namely, the equality relation. In <a class="reference internal" href="inductive_types.html#inductive-types"><span class="std std-numref">Chapter 7</span></a>, we will explain <em>how</em> equality is defined from the primitives of Lean&#8217;s logical framework. In the meanwhile, here we explain how to use it.</p>
<p>Of course, a fundamental property of equality is that it is an equivalence relation:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=#check%20eq.refl%20%20%20%20--%20%E2%88%80%20(a%20:%20?M_1),%20a%20=%20a%0A#check%20eq.symm%20%20%20%20--%20?M_2%20=%20?M_3%20%E2%86%92%20?M_3%20=%20?M_2%0A#check%20eq.trans%20%20%20--%20?M_2%20=%20?M_3%20%E2%86%92%20?M_3%20=%20?M_4%20%E2%86%92%20?M_2%20=%20?M_4" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="k">#check</span> <span class="n">eq.refl</span>    <span class="c1">-- &#8704; (a : ?M_1), a = a</span>
<span class="k">#check</span> <span class="n">eq.symm</span>    <span class="c1">-- ?M_2 = ?M_3 &#8594; ?M_3 = ?M_2</span>
<span class="k">#check</span> <span class="n">eq.trans</span>   <span class="c1">-- ?M_2 = ?M_3 &#8594; ?M_3 = ?M_4 &#8594; ?M_2 = ?M_4</span>
</pre></div>
</div>
</div><p>We can make the output easier to read by telling Lean not to the insert implicit arguments (which are displayed here as metavariables).</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=universe%20u%0A%0A#check%20&#64;eq.refl.%7Bu%7D%20%20%20--%20%E2%88%80%20%7B%CE%B1%20:%20Sort%20u%7D%20(a%20:%20%CE%B1),%20a%20=%20a%0A#check%20&#64;eq.symm.%7Bu%7D%20%20%20--%20%E2%88%80%20%7B%CE%B1%20:%20Sort%20u%7D%20%7Ba%20b%20:%20%CE%B1%7D,%20a%20=%20b%20%E2%86%92%20b%20=%20a%0A#check%20&#64;eq.trans.%7Bu%7D%20%20--%20%E2%88%80%20%7B%CE%B1%20:%20Sort%20u%7D%20%7Ba%20b%20c%20:%20%CE%B1%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%20%20a%20=%20b%20%E2%86%92%20b%20=%20c%20%E2%86%92%20a%20=%20c" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">universe</span> <span class="n">u</span>

<span class="k">#check</span> <span class="bp">@</span><span class="n">eq.refl.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span>   <span class="c1">-- &#8704; {&#945; : Sort u} (a : &#945;), a = a</span>
<span class="k">#check</span> <span class="bp">@</span><span class="n">eq.symm.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span>   <span class="c1">-- &#8704; {&#945; : Sort u} {a b : &#945;}, a = b &#8594; b = a</span>
<span class="k">#check</span> <span class="bp">@</span><span class="n">eq.trans.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span>  <span class="c1">-- &#8704; {&#945; : Sort u} {a b c : &#945;},</span>
                      <span class="c1">--   a = b &#8594; b = c &#8594; a = c</span>
</pre></div>
</div>
</div><p>The inscription <code class="docutils literal"><span class="pre">.{u}</span></code> tells Lean to instantiate the constants at the universe <code class="docutils literal"><span class="pre">u</span></code>.</p>
<p>Thus, for example, we can specialize the example from the previous section to the equality relation:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=universe%20u%0Avariables%20(%CE%B1%20:%20Type)%20(a%20b%20c%20d%20:%20%CE%B1)%0Avariables%20(hab%20:%20a%20=%20b)%20(hcb%20:%20c%20=%20b)%20(hcd%20:%20c%20=%20d)%0A%0Aexample%20:%20a%20=%20d%20:=%0Aeq.trans%20(eq.trans%20hab%20(eq.symm%20hcb))%20hcd" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">universe</span> <span class="n">u</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">hcb</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">hcd</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">d</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">d</span> <span class="o">:=</span>
<span class="n">eq.trans</span> <span class="o">(</span><span class="n">eq.trans</span> <span class="n">hab</span> <span class="o">(</span><span class="n">eq.symm</span> <span class="n">hcb</span><span class="o">))</span> <span class="n">hcd</span>
</pre></div>
</div>
</div><p>We can also use the projection notation:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=universe%20u%0Avariables%20(%CE%B1%20:%20Type%20u)%20(a%20b%20c%20d%20:%20%CE%B1)%0Avariables%20(hab%20:%20a%20=%20b)%20(hcb%20:%20c%20=%20b)%20(hcd%20:%20c%20=%20d)%0A%0A--%20BEGIN%0Aexample%20:%20a%20=%20d%20:=%20(hab.trans%20hcb.symm).trans%20hcd%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">d</span> <span class="o">:=</span> <span class="o">(</span><span class="n">hab.trans</span> <span class="n">hcb.symm</span><span class="o">)</span><span class="bp">.</span><span class="n">trans</span> <span class="n">hcd</span>
</pre></div>
</div>
</div><p>Reflexivity is more powerful than it looks. Recall that terms in the Calculus of Constructions have a computational interpretation, and that the logical framework treats terms with a common reduct as the same. As a result, some nontrivial identities can be proved by reflexivity:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=universe%20u%0Avariables%20(%CE%B1%20%CE%B2%20:%20Type%20u)%0A%0Aexample%20(f%20:%20%CE%B1%20%E2%86%92%20%CE%B2)%20(a%20:%20%CE%B1)%20:%20(%CE%BB%20x,%20f%20x)%20a%20=%20f%20a%20:=%20eq.refl%20_%0Aexample%20(a%20:%20%CE%B1)%20(b%20:%20%CE%B1)%20:%20(a,%20b).1%20=%20a%20:=%20eq.refl%20_%0Aexample%20:%202%20+%203%20=%205%20:=%20eq.refl%20_" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">universe</span> <span class="n">u</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">&#945;</span> <span class="n">&#946;</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#946;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#955;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">eq.refl</span> <span class="n">_</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">eq.refl</span> <span class="n">_</span>
<span class="kd">example</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">=</span> <span class="mi">5</span> <span class="o">:=</span> <span class="n">eq.refl</span> <span class="n">_</span>
</pre></div>
</div>
</div><p>This feature of the framework is so important that the library defines a notation <code class="docutils literal"><span class="pre">rfl</span></code> for <code class="docutils literal"><span class="pre">eq.refl</span> <span class="pre">_</span></code>:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=universe%20u%0Avariables%20(%CE%B1%20%CE%B2%20:%20Type%20u)%0A%0A--%20BEGIN%0Aexample%20(f%20:%20%CE%B1%20%E2%86%92%20%CE%B2)%20(a%20:%20%CE%B1)%20:%20(%CE%BB%20x,%20f%20x)%20a%20=%20f%20a%20:=%20rfl%0Aexample%20(a%20:%20%CE%B1)%20(b%20:%20%CE%B1)%20:%20(a,%20b).1%20=%20a%20:=%20rfl%0Aexample%20:%202%20+%203%20=%205%20:=%20rfl%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#946;</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#955;</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kd">example</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">=</span> <span class="mi">5</span> <span class="o">:=</span> <span class="n">rfl</span>
</pre></div>
</div>
</div><p>Equality is much more than an equivalence relation, however. It has the important property that every assertion respects the equivalence, in the sense that we can substitute equal expressions without changing the truth value. That is, given <code class="docutils literal"><span class="pre">h1</span> <span class="pre">:</span> <span class="pre">a</span> <span class="pre">=</span> <span class="pre">b</span></code> and <code class="docutils literal"><span class="pre">h2</span> <span class="pre">:</span> <span class="pre">p</span> <span class="pre">a</span></code>, we can construct a proof for <code class="docutils literal"><span class="pre">p</span> <span class="pre">b</span></code> using substitution: <code class="docutils literal"><span class="pre">eq.subst</span> <span class="pre">h1</span> <span class="pre">h2</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=universe%20u%0A%0Aexample%20(%CE%B1%20:%20Type%20u)%20(a%20b%20:%20%CE%B1)%20(p%20:%20%CE%B1%20%E2%86%92%20Prop)%0A%20%20(h1%20:%20a%20=%20b)%20(h2%20:%20p%20a)%20:%20p%20b%20:=%0Aeq.subst%20h1%20h2%0A%0Aexample%20(%CE%B1%20:%20Type%20u)%20(a%20b%20:%20%CE%B1)%20(p%20:%20%CE%B1%20%E2%86%92%20Prop)%0A%20%20(h1%20:%20a%20=%20b)%20(h2%20:%20p%20a)%20:%20p%20b%20:=%0Ah1%20%E2%96%B8%20h2" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">universe</span> <span class="n">u</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">p</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="n">b</span> <span class="o">:=</span>
<span class="n">eq.subst</span> <span class="n">h1</span> <span class="n">h2</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">p</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="n">b</span> <span class="o">:=</span>
<span class="n">h1</span> <span class="bp">&#9656;</span> <span class="n">h2</span>
</pre></div>
</div>
</div><p>The triangle in the second presentation is nothing more than notation for <code class="docutils literal"><span class="pre">eq.subst</span></code>, and you can enter it by typing <code class="docutils literal"><span class="pre">\t</span></code>.</p>
<p>The rule <code class="docutils literal"><span class="pre">eq.subst</span></code> is used to define the following auxiliary rules, which carry out more explicit substitutions. They are designed to deal with applicative terms, that is, terms of form <code class="docutils literal"><span class="pre">s</span> <span class="pre">t</span></code>. Specifically, <code class="docutils literal"><span class="pre">congr_arg</span></code> can be used to replace the argument, <code class="docutils literal"><span class="pre">congr_fun</span></code> can be used to replace the term that is being applied, and <code class="docutils literal"><span class="pre">congr</span></code> can be used to replace both at once.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variable%20%CE%B1%20:%20Type%0Avariables%20a%20b%20:%20%CE%B1%0Avariables%20f%20g%20:%20%CE%B1%20%E2%86%92%20%E2%84%95%0Avariable%20h%E2%82%81%20:%20a%20=%20b%0Avariable%20h%E2%82%82%20:%20f%20=%20g%0A%0Aexample%20:%20f%20a%20=%20f%20b%20:=%20congr_arg%20f%20h%E2%82%81%0Aexample%20:%20f%20a%20=%20g%20a%20:=%20congr_fun%20h%E2%82%82%20a%0Aexample%20:%20f%20a%20=%20g%20b%20:=%20congr%20h%E2%82%82%20h%E2%82%81" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variable</span> <span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="kd">variables</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#945;</span>
<span class="kd">variables</span> <span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span>
<span class="kd">variable</span> <span class="n">h&#8321;</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span>
<span class="kd">variable</span> <span class="n">h&#8322;</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">g</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">congr_arg</span> <span class="n">f</span> <span class="n">h&#8321;</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">congr_fun</span> <span class="n">h&#8322;</span> <span class="n">a</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">congr</span> <span class="n">h&#8322;</span> <span class="n">h&#8321;</span>
</pre></div>
</div>
</div><p>Lean&#8217;s library contains a large number of common identities, such as these:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20a%20b%20c%20d%20:%20%E2%84%A4%0A%0Aexample%20:%20a%20+%200%20=%20a%20:=%20add_zero%20a%0Aexample%20:%200%20+%20a%20=%20a%20:=%20zero_add%20a%0Aexample%20:%20a%20*%201%20=%20a%20:=%20mul_one%20a%0Aexample%20:%201%20*%20a%20=%20a%20:=%20one_mul%20a%0Aexample%20:%20-a%20+%20a%20=%200%20:=%20neg_add_self%20a%0Aexample%20:%20a%20+%20-a%20=%200%20:=%20add_neg_self%20a%0Aexample%20:%20a%20-%20a%20=%200%20:=%20sub_self%20a%0Aexample%20:%20a%20+%20b%20=%20b%20+%20a%20:=%20add_comm%20a%20b%0Aexample%20:%20a%20+%20b%20+%20c%20=%20a%20+%20(b%20+%20c)%20:=%20add_assoc%20a%20b%20c%0Aexample%20:%20a%20*%20b%20=%20b%20*%20a%20:=%20mul_comm%20a%20b%0Aexample%20:%20a%20*%20b%20*%20c%20=%20a%20*%20(b%20*%20c)%20:=%20mul_assoc%20a%20b%20c%0Aexample%20:%20a%20*%20(b%20+%20c)%20=%20a%20*%20b%20+%20a%20*%20c%20:=%20mul_add%20a%20b%20c%0Aexample%20:%20a%20*%20(b%20+%20c)%20=%20a%20*%20b%20+%20a%20*%20c%20:=%20left_distrib%20a%20b%20c%0Aexample%20:%20(a%20+%20b)%20*%20c%20=%20a%20*%20c%20+%20b%20*%20c%20:=%20add_mul%20a%20b%20c%0Aexample%20:%20(a%20+%20b)%20*%20c%20=%20a%20*%20c%20+%20b%20*%20c%20:=%20right_distrib%20a%20b%20c%0Aexample%20:%20a%20*%20(b%20-%20c)%20=%20a%20*%20b%20-%20a%20*%20c%20:=%20mul_sub%20a%20b%20c%0Aexample%20:%20(a%20-%20b)%20*%20c%20=%20a%20*%20c%20-%20b%20*%20c%20:=%20sub_mul%20a%20b%20c" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variables</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">&#8484;</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">add_zero</span> <span class="n">a</span>
<span class="kd">example</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">zero_add</span> <span class="n">a</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">mul_one</span> <span class="n">a</span>
<span class="kd">example</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">one_mul</span> <span class="n">a</span>
<span class="kd">example</span> <span class="o">:</span> <span class="bp">-</span><span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">neg_add_self</span> <span class="n">a</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="bp">-</span><span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">add_neg_self</span> <span class="n">a</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">sub_self</span> <span class="n">a</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">add_comm</span> <span class="n">a</span> <span class="n">b</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span> <span class="n">add_assoc</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">mul_comm</span> <span class="n">a</span> <span class="n">b</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span> <span class="n">mul_assoc</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">mul_add</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">left_distrib</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">add_mul</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">right_distrib</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">c</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">-</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">mul_sub</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">sub_mul</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span>
</pre></div>
</div>
</div><p>Note that <code class="docutils literal"><span class="pre">mul_add</span></code> and <code class="docutils literal"><span class="pre">add_mul</span></code> are alternative names for <code class="docutils literal"><span class="pre">left_distrib</span></code> and <code class="docutils literal"><span class="pre">right_distrib</span></code>, respectively. The properties above are stated for the integers; the type <code class="docutils literal"><span class="pre">&#8484;</span></code> can be entered as <code class="docutils literal"><span class="pre">\int</span></code>, though we can also use the ascii equivalent <code class="docutils literal"><span class="pre">int</span></code>. Identities likes these are designed to work in arbitrary instances of the relevant algebraic structures, using the type class mechanism that is described in <a class="reference internal" href="type_classes.html#type-classes"><span class="std std-numref">Chapter 10</span></a>. In particular, all these facts hold in any commutative ring, of which Lean recognizes the integers to be an instance. <a class="reference internal" href="interacting_with_lean.html#interacting-with-lean"><span class="std std-numref">Chapter 6</span></a> provides some pointers as to how to find theorems like this in the library.</p>
<p>Here is an example of a calculation in the natural numbers that uses substitution combined with associativity, commutativity, and distributivity of the integers.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20x%20y%20z%20:%20%E2%84%A4%0A%0Aexample%20(x%20y%20z%20:%20%E2%84%95)%20:%20x%20*%20(y%20+%20z)%20=%20x%20*%20y%20+%20x%20*%20z%20:=%20mul_add%20x%20y%20z%0Aexample%20(x%20y%20z%20:%20%E2%84%95)%20:%20(x%20+%20y)%20*%20z%20=%20x%20*%20z%20+%20y%20*%20z%20:=%20add_mul%20x%20y%20z%0Aexample%20(x%20y%20z%20:%20%E2%84%95)%20:%20x%20+%20y%20+%20z%20=%20x%20+%20(y%20+%20z)%20:=%20add_assoc%20x%20y%20z%0A%0Aexample%20(x%20y%20:%20%E2%84%95)%20:%0A%20%20(x%20+%20y)%20*%20(x%20+%20y)%20=%20x%20*%20x%20+%20y%20*%20x%20+%20x%20*%20y%20+%20y%20*%20y%20:=%0Ahave%20h1%20:%20(x%20+%20y)%20*%20(x%20+%20y)%20=%20(x%20+%20y)%20*%20x%20+%20(x%20+%20y)%20*%20y,%0A%20%20from%20mul_add%20(x%20+%20y)%20x%20y,%0Ahave%20h2%20:%20(x%20+%20y)%20*%20(x%20+%20y)%20=%20x%20*%20x%20+%20y%20*%20x%20+%20(x%20*%20y%20+%20y%20*%20y),%0A%20%20from%20(add_mul%20x%20y%20x)%20%E2%96%B8%20(add_mul%20x%20y%20y)%20%E2%96%B8%20h1,%0Ah2.trans%20(add_assoc%20(x%20*%20x%20+%20y%20*%20x)%20(x%20*%20y)%20(y%20*%20y)).symm" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variables</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8484;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="n">z</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">z</span> <span class="o">:=</span> <span class="n">mul_add</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">z</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">z</span> <span class="o">:=</span> <span class="n">add_mul</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">+</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="n">z</span><span class="o">)</span> <span class="o">:=</span> <span class="n">add_assoc</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">y</span><span class="o">,</span>
  <span class="k">from</span> <span class="n">mul_add</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
<span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">y</span><span class="o">),</span>
  <span class="k">from</span> <span class="o">(</span><span class="n">add_mul</span> <span class="n">x</span> <span class="n">y</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#9656;</span> <span class="o">(</span><span class="n">add_mul</span> <span class="n">x</span> <span class="n">y</span> <span class="n">y</span><span class="o">)</span> <span class="bp">&#9656;</span> <span class="n">h1</span><span class="o">,</span>
<span class="n">h2.trans</span> <span class="o">(</span><span class="n">add_assoc</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">*</span> <span class="n">y</span><span class="o">))</span><span class="bp">.</span><span class="n">symm</span>
</pre></div>
</div>
</div><p>Notice that the second implicit parameter to <code class="docutils literal"><span class="pre">eq.subst</span></code>, which provides the context in which the substitution is to occur, has type <code class="docutils literal"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">Prop</span></code>. Inferring this predicate therefore requires an instance of <em>higher-order unification</em>. In full generally, the problem of determining whether a higher-order unifier exists is undecidable, and Lean can at best provide imperfect and approximate solutions to the problem. As a result, <code class="docutils literal"><span class="pre">eq.subst</span></code> doesn&#8217;t always do what you want it to. This issue is discussed in greater detail in <a class="reference internal" href="interacting_with_lean.html#elaboration-hints"><span class="std std-numref">Section 6.10</span></a>.</p>
<p>Because equational reasoning is so common and important, Lean provides a number of mechanisms to carry it out more effectively. The next section offers syntax that allow you to write calculational proofs in a more natural and perspicuous way. But, more importantly, equational reasoning is supported by a term rewriter, a simplifier, and other kinds of automation. The term rewriter and simplifier are described briefly in the next section, and then in greater detail in the next chapter.</p>
</div>
<div class="section" id="calculational-proofs">
<span id="id3"></span><h2>4.3. Calculational Proofs<a class="headerlink" href="#calculational-proofs" title="Permalink to this headline">&#182;</a></h2>
<p>A calculational proof is just a chain of intermediate results that are meant to be composed by basic principles such as the transitivity of equality. In Lean, a calculation proof starts with the keyword <code class="docutils literal"><span class="pre">calc</span></code>, and has the following syntax:</p>
<div class="highlight-text"><div class="highlight"><pre>calc
  &lt;expr&gt;_0  &#39;op_1&#39;  &lt;expr&gt;_1  &#39;:&#39;  &lt;proof&gt;_1
    &#39;...&#39;   &#39;op_2&#39;  &lt;expr&gt;_2  &#39;:&#39;  &lt;proof&gt;_2
     ...
    &#39;...&#39;   &#39;op_n&#39;  &lt;expr&gt;_n  &#39;:&#39;  &lt;proof&gt;_n
</pre></div>
</div>
<p>Each <code class="docutils literal"><span class="pre">&lt;proof&gt;_i</span></code> is a proof for <code class="docutils literal"><span class="pre">&lt;expr&gt;_{i-1}</span> <span class="pre">op_i</span> <span class="pre">&lt;expr&gt;_i</span></code>.</p>
<p>Here is an example:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(a%20b%20c%20d%20e%20:%20%E2%84%95)%0Avariable%20h1%20:%20a%20=%20b%0Avariable%20h2%20:%20b%20=%20c%20+%201%0Avariable%20h3%20:%20c%20=%20d%0Avariable%20h4%20:%20e%20=%201%20+%20d%0A%0Atheorem%20T%20:%20a%20=%20e%20:=%0Acalc%0A%20%20a%20%20%20%20%20=%20b%20%20%20%20%20%20:%20h1%0A%20%20%20%20...%20=%20c%20+%201%20%20:%20h2%0A%20%20%20%20...%20=%20d%20+%201%20%20:%20congr_arg%20_%20h3%0A%20%20%20%20...%20=%201%20+%20d%20%20:%20add_comm%20d%20(1%20:%20%E2%84%95)%0A%20%20%20%20...%20=%20%20e%20%20%20%20%20:%20eq.symm%20h4" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span>
<span class="kd">variable</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span>
<span class="kd">variable</span> <span class="n">h2</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">+</span> <span class="mi">1</span>
<span class="kd">variable</span> <span class="n">h3</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">d</span>
<span class="kd">variable</span> <span class="n">h4</span> <span class="o">:</span> <span class="n">e</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">d</span>

<span class="kd">theorem</span> <span class="n">T</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">e</span> <span class="o">:=</span>
<span class="k">calc</span>
  <span class="n">a</span>     <span class="bp">=</span> <span class="n">b</span>      <span class="o">:</span> <span class="n">h1</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">+</span> <span class="mi">1</span>  <span class="o">:</span> <span class="n">h2</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span>  <span class="o">:</span> <span class="n">congr_arg</span> <span class="n">_</span> <span class="n">h3</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">d</span>  <span class="o">:</span> <span class="n">add_comm</span> <span class="n">d</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span>
    <span class="bp">...</span> <span class="bp">=</span>  <span class="n">e</span>     <span class="o">:</span> <span class="n">eq.symm</span> <span class="n">h4</span>
</pre></div>
</div>
</div><p>The style of writing proofs is most effective when it is used in conjunction with the <code class="docutils literal"><span class="pre">simp</span></code> and <code class="docutils literal"><span class="pre">rewrite</span></code> tactics, which are discussed in greater detail in the next chapter. For example, using the abbreviation <code class="docutils literal"><span class="pre">rw</span></code> for rewrite, the proof above could be written as follows:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(a%20b%20c%20d%20e%20:%20%E2%84%95)%0Avariable%20h1%20:%20a%20=%20b%0Avariable%20h2%20:%20b%20=%20c%20+%201%0Avariable%20h3%20:%20c%20=%20d%0Avariable%20h4%20:%20e%20=%201%20+%20d%0A%0Ainclude%20h1%20h2%20h3%20h4%0Atheorem%20T%20:%20a%20=%20e%20:=%0Acalc%0A%20%20a%20%20%20%20%20=%20b%20%20%20%20%20%20:%20by%20rw%20h1%0A%20%20%20%20...%20=%20c%20+%201%20%20:%20by%20rw%20h2%0A%20%20%20%20...%20=%20d%20+%201%20%20:%20by%20rw%20h3%0A%20%20%20%20...%20=%201%20+%20d%20%20:%20by%20rw%20add_comm%0A%20%20%20%20...%20=%20%20e%20%20%20%20%20:%20by%20rw%20h4" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span>
<span class="kd">variable</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span>
<span class="kd">variable</span> <span class="n">h2</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">+</span> <span class="mi">1</span>
<span class="kd">variable</span> <span class="n">h3</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">d</span>
<span class="kd">variable</span> <span class="n">h4</span> <span class="o">:</span> <span class="n">e</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">d</span>

<span class="kn">include</span> <span class="n">h1</span> <span class="n">h2</span> <span class="n">h3</span> <span class="n">h4</span>
<span class="kd">theorem</span> <span class="n">T</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">e</span> <span class="o">:=</span>
<span class="k">calc</span>
  <span class="n">a</span>     <span class="bp">=</span> <span class="n">b</span>      <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">h1</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">+</span> <span class="mi">1</span>  <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">h2</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span>  <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">h3</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">d</span>  <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">add_comm</span>
    <span class="bp">...</span> <span class="bp">=</span>  <span class="n">e</span>     <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">h4</span>
</pre></div>
</div>
</div><p>In the next chapter, we will see that hypotheses can be introduced, renamed, and modified by tactics, so it is not always clear what the names in <code class="docutils literal"><span class="pre">rw</span> <span class="pre">h1</span></code> refer to (though, in this case, it is). For that reason, section variables and variables that only appear in a tactic command or block are not automatically added to the context. The <code class="docutils literal"><span class="pre">include</span></code> command takes care of that. Essentially, the <code class="docutils literal"><span class="pre">rewrite</span></code> tactic uses a given equality (which can be a hypothesis, a theorem name, or a complex term) to &#8220;rewrite&#8221; the goal. If doing so reduces the goal to an identity <code class="docutils literal"><span class="pre">t</span> <span class="pre">=</span> <span class="pre">t</span></code>, the tactic applies reflexivity to prove it.</p>
<p>Rewrites can applied sequentially, so that the proof above can be shortened to this:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(a%20b%20c%20d%20e%20:%20%E2%84%95)%0Avariable%20h1%20:%20a%20=%20b%0Avariable%20h2%20:%20b%20=%20c%20+%201%0Avariable%20h3%20:%20c%20=%20d%0Avariable%20h4%20:%20e%20=%201%20+%20d%0A%0Ainclude%20h1%20h2%20h3%20h4%0A--%20BEGIN%0Atheorem%20T%20:%20a%20=%20e%20:=%0Acalc%0A%20%20a%20%20%20%20%20=%20d%20+%201%20%20:%20by%20rw%20%5Bh1,%20h2,%20h3%5D%0A%20%20%20%20...%20=%201%20+%20d%20%20:%20by%20rw%20add_comm%0A%20%20%20%20...%20=%20%20e%20%20%20%20%20:%20by%20rw%20h4%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">theorem</span> <span class="n">T</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">e</span> <span class="o">:=</span>
<span class="k">calc</span>
  <span class="n">a</span>     <span class="bp">=</span> <span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span>  <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">,</span> <span class="n">h3</span><span class="o">]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">d</span>  <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">add_comm</span>
    <span class="bp">...</span> <span class="bp">=</span>  <span class="n">e</span>     <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">h4</span>
</pre></div>
</div>
</div><p>Or even this:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(a%20b%20c%20d%20e%20:%20%E2%84%95)%0Avariable%20h1%20:%20a%20=%20b%0Avariable%20h2%20:%20b%20=%20c%20+%201%0Avariable%20h3%20:%20c%20=%20d%0Avariable%20h4%20:%20e%20=%201%20+%20d%0A%0Ainclude%20h1%20h2%20h3%20h4%0A--%20BEGIN%0Atheorem%20T%20:%20a%20=%20e%20:=%0Aby%20rw%20%5Bh1,%20h2,%20h3,%20add_comm,%20h4%5D%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">theorem</span> <span class="n">T</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">e</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">,</span> <span class="n">h3</span><span class="o">,</span> <span class="n">add_comm</span><span class="o">,</span> <span class="n">h4</span><span class="o">]</span>
</pre></div>
</div>
</div><p>The <code class="docutils literal"><span class="pre">simp</span></code> tactic, instead, rewrites the goal by applying the given identities repeatedly, in any order, anywhere they are applicable in a term. It also uses other rules that have been previously declared to the system, and applies associativity and commutativity wisely to put expressions in canonical forms. As a result, we can also prove the theorem as follows:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(a%20b%20c%20d%20e%20:%20%E2%84%95)%0Avariable%20h1%20:%20a%20=%20b%0Avariable%20h2%20:%20b%20=%20c%20+%201%0Avariable%20h3%20:%20c%20=%20d%0Avariable%20h4%20:%20e%20=%201%20+%20d%0A%0Ainclude%20h1%20h2%20h3%20h4%0A--%20BEGIN%0Atheorem%20T%20:%20a%20=%20e%20:=%0Aby%20simp%20%5Bh1,%20h2,%20h3,%20h4%5D%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">theorem</span> <span class="n">T</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">e</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">,</span> <span class="n">h3</span><span class="o">,</span> <span class="n">h4</span><span class="o">]</span>
</pre></div>
</div>
</div><p>We will discuss variations of <code class="docutils literal"><span class="pre">rw</span></code> and <code class="docutils literal"><span class="pre">simp</span></code> in the next chapter.</p>
<p>The <code class="docutils literal"><span class="pre">calc</span></code> command can be configured for any relation that supports some form of transitivity. It can even combine different relations.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=theorem%20T2%20(a%20b%20c%20d%20:%20%E2%84%95)%0A%20%20(h1%20:%20a%20=%20b)%20(h2%20:%20b%20%E2%89%A4%20c)%20(h3%20:%20c%20+%201%20%3C%20d)%20:%20a%20%3C%20d%20:=%0Acalc%0A%20%20a%20%20%20%20%20=%20b%20%20%20%20%20:%20h1%0A%20%20%20%20...%20%3C%20b%20+%201%20:%20nat.lt_succ_self%20b%0A%20%20%20%20...%20%E2%89%A4%20c%20+%201%20:%20nat.succ_le_succ%20h2%0A%20%20%20%20...%20%3C%20d%20%20%20%20%20:%20h3" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">theorem</span> <span class="n">T2</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">&#8804;</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">h3</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">d</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">d</span> <span class="o">:=</span>
<span class="k">calc</span>
  <span class="n">a</span>     <span class="bp">=</span> <span class="n">b</span>     <span class="o">:</span> <span class="n">h1</span>
    <span class="bp">...</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">nat.lt_succ_self</span> <span class="n">b</span>
    <span class="bp">...</span> <span class="bp">&#8804;</span> <span class="n">c</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">nat.succ_le_succ</span> <span class="n">h2</span>
    <span class="bp">...</span> <span class="bp">&lt;</span> <span class="n">d</span>     <span class="o">:</span> <span class="n">h3</span>
</pre></div>
</div>
</div><p>With <code class="docutils literal"><span class="pre">calc</span></code>, we can write the proof in the last section in a more natural and perspicuous way.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=example%20(x%20y%20:%20%E2%84%95)%20:%0A%20%20(x%20+%20y)%20*%20(x%20+%20y)%20=%20x%20*%20x%20+%20y%20*%20x%20+%20x%20*%20y%20+%20y%20*%20y%20:=%0Acalc%0A%20%20(x%20+%20y)%20*%20(x%20+%20y)%20=%20(x%20+%20y)%20*%20x%20+%20(x%20+%20y)%20*%20y%20%20:%20by%20rw%20mul_add%0A%20%20%20%20...%20=%20x%20*%20x%20+%20y%20*%20x%20+%20(x%20+%20y)%20*%20y%20%20%20%20%20%20%20%20%20%20%20%20:%20by%20rw%20add_mul%0A%20%20%20%20...%20=%20x%20*%20x%20+%20y%20*%20x%20+%20(x%20*%20y%20+%20y%20*%20y)%20%20%20%20%20%20%20%20:%20by%20rw%20add_mul%0A%20%20%20%20...%20=%20x%20*%20x%20+%20y%20*%20x%20+%20x%20*%20y%20+%20y%20*%20y%20%20%20%20%20%20%20%20%20%20:%20by%20rw%20%E2%86%90add_assoc" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:=</span>
<span class="k">calc</span>
  <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">y</span>  <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">mul_add</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">y</span>            <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">add_mul</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span>        <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">add_mul</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">y</span>          <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="bp">&#8592;</span><span class="n">add_assoc</span>
</pre></div>
</div>
</div><p>Here the left arrow before <code class="docutils literal"><span class="pre">add_assoc</span></code> tells rewrite to use the identity in the opposite direction. (You can enter it with <code class="docutils literal"><span class="pre">\l</span></code> or use the ascii equivalent, <code class="docutils literal"><span class="pre">&lt;-</span></code>.) If brevity is what we are after, both <code class="docutils literal"><span class="pre">rw</span></code> and <code class="docutils literal"><span class="pre">simp</span></code> can do the job on their own:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=example%20(x%20y%20:%20%E2%84%95)%20:%0A%20%20(x%20+%20y)%20*%20(x%20+%20y)%20=%20x%20*%20x%20+%20y%20*%20x%20+%20x%20*%20y%20+%20y%20*%20y%20:=%0Aby%20rw%20%5Bmul_add,%20add_mul,%20add_mul,%20%E2%86%90add_assoc%5D%0A%0Aexample%20(x%20y%20:%20%E2%84%95)%20:%0A%20%20(x%20+%20y)%20*%20(x%20+%20y)%20=%20x%20*%20x%20+%20y%20*%20x%20+%20x%20*%20y%20+%20y%20*%20y%20:=%0Aby%20simp%20%5Bmul_add,%20add_mul%5D" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">add_mul</span><span class="o">,</span> <span class="n">add_mul</span><span class="o">,</span> <span class="bp">&#8592;</span><span class="n">add_assoc</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">add_mul</span><span class="o">]</span>
</pre></div>
</div>
</div></div>
<div class="section" id="the-existential-quantifier">
<span id="id4"></span><h2>4.4. The Existential Quantifier<a class="headerlink" href="#the-existential-quantifier" title="Permalink to this headline">&#182;</a></h2>
<p>Finally, consider the existential quantifier, which can be written as either <code class="docutils literal"><span class="pre">exists</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">&#8707;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">x</span></code>. Both versions are actually notationally convenient abbreviations for a more long-winded expression, <code class="docutils literal"><span class="pre">Exists</span> <span class="pre">(&#955;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">x)</span></code>, defined in Lean&#8217;s library.</p>
<p>As you should by now expect, the library includes both an introduction rule and an elimination rule. The introduction rule is straightforward: to prove <code class="docutils literal"><span class="pre">&#8707;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">x</span></code>, it suffices to provide a suitable term <code class="docutils literal"><span class="pre">t</span></code> and a proof of <code class="docutils literal"><span class="pre">p</span> <span class="pre">t</span></code>. here are some examples:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=open%20nat%0A%0Aexample%20:%20%E2%88%83%20x%20:%20%E2%84%95,%20x%20%3E%200%20:=%0Ahave%20h%20:%201%20%3E%200,%20from%20zero_lt_succ%200,%0Aexists.intro%201%20h%0A%0Aexample%20(x%20:%20%E2%84%95)%20(h%20:%20x%20%3E%200)%20:%20%E2%88%83%20y,%20y%20%3C%20x%20:=%0Aexists.intro%200%20h%0A%0Aexample%20(x%20y%20z%20:%20%E2%84%95)%20(hxy%20:%20x%20%3C%20y)%20(hyz%20:%20y%20%3C%20z)%20:%0A%20%20%E2%88%83%20w,%20x%20%3C%20w%20%E2%88%A7%20w%20%3C%20z%20:=%0Aexists.intro%20y%20(and.intro%20hxy%20hyz)%0A%0A#check%20&#64;exists.intro" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kn">open</span> <span class="n">nat</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span> <span class="n">zero_lt_succ</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">exists.intro</span> <span class="mi">1</span> <span class="n">h</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">y</span><span class="o">,</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">exists.intro</span> <span class="mi">0</span> <span class="n">h</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">hxy</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">hyz</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">&#8707;</span> <span class="n">w</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">w</span> <span class="bp">&#8743;</span> <span class="n">w</span> <span class="bp">&lt;</span> <span class="n">z</span> <span class="o">:=</span>
<span class="n">exists.intro</span> <span class="n">y</span> <span class="o">(</span><span class="n">and.intro</span> <span class="n">hxy</span> <span class="n">hyz</span><span class="o">)</span>

<span class="k">#check</span> <span class="bp">@</span><span class="n">exists.intro</span>
</pre></div>
</div>
</div><p>We can use the anonymous constructor notation <code class="docutils literal"><span class="pre">&#10216;t,</span> <span class="pre">h&#10217;</span></code> for <code class="docutils literal"><span class="pre">exists.intro</span> <span class="pre">t</span> <span class="pre">h</span></code>, when the type is clear from the context.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=open%20nat%0A%0A--%20BEGIN%0Aexample%20:%20%E2%88%83%20x%20:%20%E2%84%95,%20x%20%3E%200%20:=%0A%E2%9F%A81,%20zero_lt_succ%200%E2%9F%A9%0A%0Aexample%20(x%20:%20%E2%84%95)%20(h%20:%20x%20%3E%200)%20:%20%E2%88%83%20y,%20y%20%3C%20x%20:=%0A%E2%9F%A80,%20h%E2%9F%A9%0A%0Aexample%20(x%20y%20z%20:%20%E2%84%95)%20(hxy%20:%20x%20%3C%20y)%20(hyz%20:%20y%20%3C%20z)%20:%0A%20%20%E2%88%83%20w,%20x%20%3C%20w%20%E2%88%A7%20w%20%3C%20z%20:=%0A%E2%9F%A8y,%20hxy,%20hyz%E2%9F%A9%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="o">&#10216;</span><span class="mi">1</span><span class="o">,</span> <span class="n">zero_lt_succ</span> <span class="mi">0</span><span class="o">&#10217;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">y</span><span class="o">,</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="o">:=</span>
<span class="o">&#10216;</span><span class="mi">0</span><span class="o">,</span> <span class="n">h</span><span class="o">&#10217;</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">(</span><span class="n">hxy</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">hyz</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">&#8707;</span> <span class="n">w</span><span class="o">,</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">w</span> <span class="bp">&#8743;</span> <span class="n">w</span> <span class="bp">&lt;</span> <span class="n">z</span> <span class="o">:=</span>
<span class="o">&#10216;</span><span class="n">y</span><span class="o">,</span> <span class="n">hxy</span><span class="o">,</span> <span class="n">hyz</span><span class="o">&#10217;</span>
</pre></div>
</div>
</div><p>Note that <code class="docutils literal"><span class="pre">exists.intro</span></code> has implicit arguments: Lean has to infer the predicate <code class="docutils literal"><span class="pre">p</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">Prop</span></code> in the conclusion <code class="docutils literal"><span class="pre">&#8707;</span> <span class="pre">x,</span> <span class="pre">p</span> <span class="pre">x</span></code>. This is not a trivial affair. For example, if we have have <code class="docutils literal"><span class="pre">hg</span> <span class="pre">:</span> <span class="pre">g</span> <span class="pre">0</span> <span class="pre">0</span> <span class="pre">=</span> <span class="pre">0</span></code> and write <code class="docutils literal"><span class="pre">exists.intro</span> <span class="pre">0</span> <span class="pre">hg</span></code>, there are many possible values for the predicate <code class="docutils literal"><span class="pre">p</span></code>, corresponding to the theorems <code class="docutils literal"><span class="pre">&#8707;</span> <span class="pre">x,</span> <span class="pre">g</span> <span class="pre">x</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">&#8707;</span> <span class="pre">x,</span> <span class="pre">g</span> <span class="pre">x</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">0</span></code>, <code class="docutils literal"><span class="pre">&#8707;</span> <span class="pre">x,</span> <span class="pre">g</span> <span class="pre">x</span> <span class="pre">0</span> <span class="pre">=</span> <span class="pre">x</span></code>, etc. Lean uses the context to infer which one is appropriate. This is illustrated in the following example, in which we set the option <code class="docutils literal"><span class="pre">pp.implicit</span></code> to true to ask Lean&#8217;s pretty-printer to show the implicit arguments.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variable%20g%20:%20%E2%84%95%20%E2%86%92%20%E2%84%95%20%E2%86%92%20%E2%84%95%0Avariable%20hg%20:%20g%200%200%20=%200%0A%0Atheorem%20gex1%20:%20%E2%88%83%20x,%20g%20x%20x%20=%20x%20:=%20%E2%9F%A80,%20hg%E2%9F%A9%0Atheorem%20gex2%20:%20%E2%88%83%20x,%20g%20x%200%20=%20x%20:=%20%E2%9F%A80,%20hg%E2%9F%A9%0Atheorem%20gex3%20:%20%E2%88%83%20x,%20g%200%200%20=%20x%20:=%20%E2%9F%A80,%20hg%E2%9F%A9%0Atheorem%20gex4%20:%20%E2%88%83%20x,%20g%20x%20x%20=%200%20:=%20%E2%9F%A80,%20hg%E2%9F%A9%0A%0Aset_option%20pp.implicit%20true%20%20--%20display%20implicit%20arguments%0A#print%20gex1%0A#print%20gex2%0A#print%20gex3%0A#print%20gex4" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variable</span> <span class="n">g</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span>
<span class="kd">variable</span> <span class="n">hg</span> <span class="o">:</span> <span class="n">g</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span>

<span class="kd">theorem</span> <span class="n">gex1</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">g</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="o">&#10216;</span><span class="mi">0</span><span class="o">,</span> <span class="n">hg</span><span class="o">&#10217;</span>
<span class="kd">theorem</span> <span class="n">gex2</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">g</span> <span class="n">x</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="o">&#10216;</span><span class="mi">0</span><span class="o">,</span> <span class="n">hg</span><span class="o">&#10217;</span>
<span class="kd">theorem</span> <span class="n">gex3</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">g</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="o">&#10216;</span><span class="mi">0</span><span class="o">,</span> <span class="n">hg</span><span class="o">&#10217;</span>
<span class="kd">theorem</span> <span class="n">gex4</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">g</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="o">&#10216;</span><span class="mi">0</span><span class="o">,</span> <span class="n">hg</span><span class="o">&#10217;</span>

<span class="kd">set_option</span> <span class="n">pp.implicit</span> <span class="n">true</span>  <span class="c1">-- display implicit arguments</span>
<span class="k">#print</span> <span class="n">gex1</span>
<span class="k">#print</span> <span class="n">gex2</span>
<span class="k">#print</span> <span class="n">gex3</span>
<span class="k">#print</span> <span class="n">gex4</span>
</pre></div>
</div>
</div><p>We can view <code class="docutils literal"><span class="pre">exists.intro</span></code> as an information-hiding operation, since it hides the witness to the body of the assertion. The existential elimination rule, <code class="docutils literal"><span class="pre">exists.elim</span></code>, performs the opposite operation. It allows us to prove a proposition <code class="docutils literal"><span class="pre">q</span></code> from <code class="docutils literal"><span class="pre">&#8707;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">x</span></code>, by showing that <code class="docutils literal"><span class="pre">q</span></code> follows from <code class="docutils literal"><span class="pre">p</span> <span class="pre">w</span></code> for an arbitrary value <code class="docutils literal"><span class="pre">w</span></code>. Roughly speaking, since we know there is an <code class="docutils literal"><span class="pre">x</span></code> satisfying <code class="docutils literal"><span class="pre">p</span> <span class="pre">x</span></code>, we can give it a name, say, <code class="docutils literal"><span class="pre">w</span></code>. If <code class="docutils literal"><span class="pre">q</span></code> does not mention <code class="docutils literal"><span class="pre">w</span></code>, then showing that <code class="docutils literal"><span class="pre">q</span></code> follows from <code class="docutils literal"><span class="pre">p</span> <span class="pre">w</span></code> is tantamount to showing the <code class="docutils literal"><span class="pre">q</span></code> follows from the existence of any such <code class="docutils literal"><span class="pre">x</span></code>. Here is an example:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(%CE%B1%20:%20Type)%20(p%20q%20:%20%CE%B1%20%E2%86%92%20Prop)%0A%0Aexample%20(h%20:%20%E2%88%83%20x,%20p%20x%20%E2%88%A7%20q%20x)%20:%20%E2%88%83%20x,%20q%20x%20%E2%88%A7%20p%20x%20:=%0Aexists.elim%20h%0A%20%20(assume%20w,%0A%20%20%20%20assume%20hw%20:%20p%20w%20%E2%88%A7%20q%20w,%0A%20%20%20%20show%20%E2%88%83%20x,%20q%20x%20%E2%88%A7%20p%20x,%20from%20%E2%9F%A8w,%20hw.right,%20hw.left%E2%9F%A9)" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">q</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">p</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">exists.elim</span> <span class="n">h</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">w</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">hw</span> <span class="o">:</span> <span class="n">p</span> <span class="n">w</span> <span class="bp">&#8743;</span> <span class="n">q</span> <span class="n">w</span><span class="o">,</span>
    <span class="k">show</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">q</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">p</span> <span class="n">x</span><span class="o">,</span> <span class="k">from</span> <span class="o">&#10216;</span><span class="n">w</span><span class="o">,</span> <span class="n">hw.right</span><span class="o">,</span> <span class="n">hw.left</span><span class="o">&#10217;)</span>
</pre></div>
</div>
</div><p>It may be helpful to compare the exists-elimination rule to the or-elimination rule: the assertion <code class="docutils literal"><span class="pre">&#8707;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">x</span></code> can be thought of as a big disjunction of the propositions <code class="docutils literal"><span class="pre">p</span> <span class="pre">a</span></code>, as <code class="docutils literal"><span class="pre">a</span></code> ranges over all the elements of <code class="docutils literal"><span class="pre">&#945;</span></code>. Note that the anonymous constructor notation <code class="docutils literal"><span class="pre">&#10216;w,</span> <span class="pre">hw.right,</span> <span class="pre">hw.left&#10217;</span></code> abbreviates a nested constructor application; we could equally well have written <code class="docutils literal"><span class="pre">&#10216;w,</span> <span class="pre">&#10216;hw.right,</span> <span class="pre">hw.left&#10217;&#10217;</span></code>.</p>
<p>Notice that an existential proposition is very similar to a sigma type, as described in <a class="reference internal" href="dependent_type_theory.html#dependent-types"><span class="std std-numref">Section 2.8</span></a>. The difference is that given <code class="docutils literal"><span class="pre">a</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> and <code class="docutils literal"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">p</span> <span class="pre">a</span></code>, the term <code class="docutils literal"><span class="pre">exists.intro</span> <span class="pre">a</span> <span class="pre">h</span></code> has type <code class="docutils literal"><span class="pre">(&#8707;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">x)</span> <span class="pre">:</span> <span class="pre">Prop</span></code> and <code class="docutils literal"><span class="pre">sigma.mk</span> <span class="pre">a</span> <span class="pre">h</span></code> has type <code class="docutils literal"><span class="pre">(&#931;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">p</span> <span class="pre">x)</span> <span class="pre">:</span> <span class="pre">Type</span></code>. The similarity between <code class="docutils literal"><span class="pre">&#8707;</span></code> and <code class="docutils literal"><span class="pre">&#931;</span></code> is another instance of the Curry-Howard isomorphism.</p>
<p>Lean provides a more convenient way to eliminate from an existential quantifier with the <code class="docutils literal"><span class="pre">match</span></code> statement:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(%CE%B1%20:%20Type)%20(p%20q%20:%20%CE%B1%20%E2%86%92%20Prop)%0A%0Aexample%20(h%20:%20%E2%88%83%20x,%20p%20x%20%E2%88%A7%20q%20x)%20:%20%E2%88%83%20x,%20q%20x%20%E2%88%A7%20p%20x%20:=%0Amatch%20h%20with%20%E2%9F%A8w,%20hw%E2%9F%A9%20:=%0A%20%20%E2%9F%A8w,%20hw.right,%20hw.left%E2%9F%A9%0Aend" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">q</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">p</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">match</span> <span class="n">h</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">w</span><span class="o">,</span> <span class="n">hw</span><span class="o">&#10217;</span> <span class="o">:=</span>
  <span class="o">&#10216;</span><span class="n">w</span><span class="o">,</span> <span class="n">hw.right</span><span class="o">,</span> <span class="n">hw.left</span><span class="o">&#10217;</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>The <code class="docutils literal"><span class="pre">match</span></code> statement is part of Lean&#8217;s function definition system, which provides convenient and expressive ways of defining complex functions. Once again, it is the Curry-Howard isomorphism that allows us to co-opt this mechanism for writing proofs as well. The <code class="docutils literal"><span class="pre">match</span></code> statement &#8220;destructs&#8221; the existential assertion into the components <code class="docutils literal"><span class="pre">w</span></code> and <code class="docutils literal"><span class="pre">hw</span></code>, which can then be used in the body of the statement to prove the proposition. We can annotate the types used in the match for greater clarity:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(%CE%B1%20:%20Type)%20(p%20q%20:%20%CE%B1%20%E2%86%92%20Prop)%0A%0A--%20BEGIN%0Aexample%20(h%20:%20%E2%88%83%20x,%20p%20x%20%E2%88%A7%20q%20x)%20:%20%E2%88%83%20x,%20q%20x%20%E2%88%A7%20p%20x%20:=%0Amatch%20h%20with%20%E2%9F%A8(w%20:%20%CE%B1),%20(hw%20:%20p%20w%20%E2%88%A7%20q%20w)%E2%9F%A9%20:=%0A%20%20%E2%9F%A8w,%20hw.right,%20hw.left%E2%9F%A9%0Aend%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">q</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">p</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">match</span> <span class="n">h</span> <span class="k">with</span> <span class="o">&#10216;(</span><span class="n">w</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">),</span> <span class="o">(</span><span class="n">hw</span> <span class="o">:</span> <span class="n">p</span> <span class="n">w</span> <span class="bp">&#8743;</span> <span class="n">q</span> <span class="n">w</span><span class="o">)&#10217;</span> <span class="o">:=</span>
  <span class="o">&#10216;</span><span class="n">w</span><span class="o">,</span> <span class="n">hw.right</span><span class="o">,</span> <span class="n">hw.left</span><span class="o">&#10217;</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>We can even use the match statement to decompose the conjunction at the same time:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(%CE%B1%20:%20Type)%20(p%20q%20:%20%CE%B1%20%E2%86%92%20Prop)%0A%0A--%20BEGIN%0Aexample%20(h%20:%20%E2%88%83%20x,%20p%20x%20%E2%88%A7%20q%20x)%20:%20%E2%88%83%20x,%20q%20x%20%E2%88%A7%20p%20x%20:=%0Amatch%20h%20with%20%E2%9F%A8w,%20hpw,%20hqw%E2%9F%A9%20:=%0A%20%20%E2%9F%A8w,%20hqw,%20hpw%E2%9F%A9%0Aend%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">q</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">p</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">match</span> <span class="n">h</span> <span class="k">with</span> <span class="o">&#10216;</span><span class="n">w</span><span class="o">,</span> <span class="n">hpw</span><span class="o">,</span> <span class="n">hqw</span><span class="o">&#10217;</span> <span class="o">:=</span>
  <span class="o">&#10216;</span><span class="n">w</span><span class="o">,</span> <span class="n">hqw</span><span class="o">,</span> <span class="n">hpw</span><span class="o">&#10217;</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Lean also provides a pattern-matching <code class="docutils literal"><span class="pre">let</span></code> expression:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(%CE%B1%20:%20Type)%20(p%20q%20:%20%CE%B1%20%E2%86%92%20Prop)%0A%0A--%20BEGIN%0Aexample%20(h%20:%20%E2%88%83%20x,%20p%20x%20%E2%88%A7%20q%20x)%20:%20%E2%88%83%20x,%20q%20x%20%E2%88%A7%20p%20x%20:=%0Alet%20%E2%9F%A8w,%20hpw,%20hqw%E2%9F%A9%20:=%20h%20in%20%E2%9F%A8w,%20hqw,%20hpw%E2%9F%A9%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">q</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">p</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">let</span> <span class="o">&#10216;</span><span class="n">w</span><span class="o">,</span> <span class="n">hpw</span><span class="o">,</span> <span class="n">hqw</span><span class="o">&#10217;</span> <span class="o">:=</span> <span class="n">h</span> <span class="k">in</span> <span class="o">&#10216;</span><span class="n">w</span><span class="o">,</span> <span class="n">hqw</span><span class="o">,</span> <span class="n">hpw</span><span class="o">&#10217;</span>
</pre></div>
</div>
</div><p>This is essentially just alternative notation for the <code class="docutils literal"><span class="pre">match</span></code> construct above. Lean will even allow us to use an implicit <code class="docutils literal"><span class="pre">match</span></code> in the <code class="docutils literal"><span class="pre">assume</span></code> statement:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(%CE%B1%20:%20Type)%20(p%20q%20:%20%CE%B1%20%E2%86%92%20Prop)%0A%0A--%20BEGIN%0Aexample%20:%20(%E2%88%83%20x,%20p%20x%20%E2%88%A7%20q%20x)%20%E2%86%92%20%E2%88%83%20x,%20q%20x%20%E2%88%A7%20p%20x%20:=%0Aassume%20%E2%9F%A8w,%20hpw,%20hqw%E2%9F%A9,%20%E2%9F%A8w,%20hqw,%20hpw%E2%9F%A9%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">q</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">p</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="o">&#10216;</span><span class="n">w</span><span class="o">,</span> <span class="n">hpw</span><span class="o">,</span> <span class="n">hqw</span><span class="o">&#10217;,</span> <span class="o">&#10216;</span><span class="n">w</span><span class="o">,</span> <span class="n">hqw</span><span class="o">,</span> <span class="n">hpw</span><span class="o">&#10217;</span>
</pre></div>
</div>
</div><p>We will see in <a class="reference internal" href="induction_and_recursion.html#induction-and-recursion"><span class="std std-numref">Chapter 8</span></a> that all these variations are instances of a more general pattern-matching construct.</p>
<p>In the following example, we define <code class="docutils literal"><span class="pre">even</span> <span class="pre">a</span></code> as <code class="docutils literal"><span class="pre">&#8707;</span> <span class="pre">b,</span> <span class="pre">a</span> <span class="pre">=</span> <span class="pre">2*b</span></code>, and then we show that the sum of two even numbers is an even number.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=def%20is_even%20(a%20:%20nat)%20:=%20%E2%88%83%20b,%20a%20=%202%20*%20b%0A%0Atheorem%20even_plus_even%20%7Ba%20b%20:%20nat%7D%0A%20%20(h1%20:%20is_even%20a)%20(h2%20:%20is_even%20b)%20:%20is_even%20(a%20+%20b)%20:=%0Aexists.elim%20h1%20(assume%20w1,%20assume%20hw1%20:%20a%20=%202%20*%20w1,%0Aexists.elim%20h2%20(assume%20w2,%20assume%20hw2%20:%20b%20=%202%20*%20w2,%0A%20%20exists.intro%20(w1%20+%20w2)%0A%20%20%20%20(calc%0A%20%20%20%20%20%20a%20+%20b%20=%202%20*%20w1%20+%202%20*%20w2%20%20:%20by%20rw%20%5Bhw1,%20hw2%5D%0A%20%20%20%20%20%20%20%20...%20=%202*(w1%20+%20w2)%20%20%20%20%20%20:%20by%20rw%20mul_add)))" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">def</span> <span class="n">is_even</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">&#8707;</span> <span class="n">b</span><span class="o">,</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span>

<span class="kd">theorem</span> <span class="n">even_plus_even</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">is_even</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">is_even</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_even</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">exists.elim</span> <span class="n">h1</span> <span class="o">(</span><span class="k">assume</span> <span class="n">w1</span><span class="o">,</span> <span class="k">assume</span> <span class="n">hw1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">w1</span><span class="o">,</span>
<span class="n">exists.elim</span> <span class="n">h2</span> <span class="o">(</span><span class="k">assume</span> <span class="n">w2</span><span class="o">,</span> <span class="k">assume</span> <span class="n">hw2</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">w2</span><span class="o">,</span>
  <span class="n">exists.intro</span> <span class="o">(</span><span class="n">w1</span> <span class="bp">+</span> <span class="n">w2</span><span class="o">)</span>
    <span class="o">(</span><span class="k">calc</span>
      <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">w1</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">w2</span>  <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hw1</span><span class="o">,</span> <span class="n">hw2</span><span class="o">]</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="mi">2</span><span class="bp">*</span><span class="o">(</span><span class="n">w1</span> <span class="bp">+</span> <span class="n">w2</span><span class="o">)</span>      <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">mul_add</span><span class="o">)))</span>
</pre></div>
</div>
</div><p>Using the various gadgets described in this chapter &#8212; the match statement, anonymous constructors, and the <code class="docutils literal"><span class="pre">rewrite</span></code> tactic, we can write this proof concisely as follows:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=def%20is_even%20(a%20:%20nat)%20:=%20%E2%88%83%20b,%20a%20=%202%20*%20b%0A%0A--%20BEGIN%0Atheorem%20even_plus_even%20%7Ba%20b%20:%20nat%7D%0A%20%20(h1%20:%20is_even%20a)%20(h2%20:%20is_even%20b)%20:%20is_even%20(a%20+%20b)%20:=%0Amatch%20h1,%20h2%20with%0A%20%20%E2%9F%A8w1,%20hw1%E2%9F%A9,%20%E2%9F%A8w2,%20hw2%E2%9F%A9%20:=%20%E2%9F%A8w1%20+%20w2,%20by%20rw%20%5Bhw1,%20hw2,%20mul_add%5D%E2%9F%A9%0Aend%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">theorem</span> <span class="n">even_plus_even</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">is_even</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">is_even</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_even</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">match</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span> <span class="k">with</span>
  <span class="o">&#10216;</span><span class="n">w1</span><span class="o">,</span> <span class="n">hw1</span><span class="o">&#10217;,</span> <span class="o">&#10216;</span><span class="n">w2</span><span class="o">,</span> <span class="n">hw2</span><span class="o">&#10217;</span> <span class="o">:=</span> <span class="o">&#10216;</span><span class="n">w1</span> <span class="bp">+</span> <span class="n">w2</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hw1</span><span class="o">,</span> <span class="n">hw2</span><span class="o">,</span> <span class="n">mul_add</span><span class="o">]&#10217;</span>
<span class="kd">end</span>
</pre></div>
</div>
</div><p>Just as the constructive &#8220;or&#8221; is stronger than the classical &#8220;or,&#8221; so, too, is the constructive &#8220;exists&#8221; stronger than the classical &#8220;exists&#8221;. For example, the following implication requires classical reasoning because, from a constructive standpoint, knowing that it is not the case that every <code class="docutils literal"><span class="pre">x</span></code> satisfies <code class="docutils literal"><span class="pre">&#172;</span> <span class="pre">p</span></code> is not the same as having a particular <code class="docutils literal"><span class="pre">x</span></code> that satisfies <code class="docutils literal"><span class="pre">p</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=open%20classical%0A%0Avariables%20(%CE%B1%20:%20Type)%20(p%20:%20%CE%B1%20%E2%86%92%20Prop)%0A%0Aexample%20(h%20:%20%C2%AC%20%E2%88%80%20x,%20%C2%AC%20p%20x)%20:%20%E2%88%83%20x,%20p%20x%20:=%0Aby_contradiction%0A%20%20(assume%20h1%20:%20%C2%AC%20%E2%88%83%20x,%20p%20x,%0A%20%20%20%20have%20h2%20:%20%E2%88%80%20x,%20%C2%AC%20p%20x,%20from%0A%20%20%20%20%20%20assume%20x,%0A%20%20%20%20%20%20assume%20h3%20:%20p%20x,%0A%20%20%20%20%20%20have%20h4%20:%20%E2%88%83%20x,%20p%20x,%20from%20%20%E2%9F%A8x,%20h3%E2%9F%A9,%0A%20%20%20%20%20%20show%20false,%20from%20h1%20h4,%0A%20%20%20%20show%20false,%20from%20h%20h2)" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kn">open</span> <span class="n">classical</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#172;</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="bp">&#172;</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">by_contradiction</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">h1</span> <span class="o">:</span> <span class="bp">&#172;</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="bp">&#172;</span> <span class="n">p</span> <span class="n">x</span><span class="o">,</span> <span class="k">from</span>
      <span class="k">assume</span> <span class="n">x</span><span class="o">,</span>
      <span class="k">assume</span> <span class="n">h3</span> <span class="o">:</span> <span class="n">p</span> <span class="n">x</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">h4</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">,</span> <span class="k">from</span>  <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">h3</span><span class="o">&#10217;,</span>
      <span class="k">show</span> <span class="n">false</span><span class="o">,</span> <span class="k">from</span> <span class="n">h1</span> <span class="n">h4</span><span class="o">,</span>
    <span class="k">show</span> <span class="n">false</span><span class="o">,</span> <span class="k">from</span> <span class="n">h</span> <span class="n">h2</span><span class="o">)</span>
</pre></div>
</div>
</div><p>What follows are some common identities involving the existential quantifier. In the exercises below, we encourage you to prove as many as you can. We also leave it to you to determine which are nonconstructive, and hence require some form of classical reasoning.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=open%20classical%0A%0Avariables%20(%CE%B1%20:%20Type)%20(p%20q%20:%20%CE%B1%20%E2%86%92%20Prop)%0Avariable%20a%20:%20%CE%B1%0Avariable%20r%20:%20Prop%0A%0Aexample%20:%20(%E2%88%83%20x%20:%20%CE%B1,%20r)%20%E2%86%92%20r%20:=%20sorry%0Aexample%20:%20r%20%E2%86%92%20(%E2%88%83%20x%20:%20%CE%B1,%20r)%20:=%20sorry%0Aexample%20:%20(%E2%88%83%20x,%20p%20x%20%E2%88%A7%20r)%20%E2%86%94%20(%E2%88%83%20x,%20p%20x)%20%E2%88%A7%20r%20:=%20sorry%0Aexample%20:%20(%E2%88%83%20x,%20p%20x%20%E2%88%A8%20q%20x)%20%E2%86%94%20(%E2%88%83%20x,%20p%20x)%20%E2%88%A8%20(%E2%88%83%20x,%20q%20x)%20:=%20sorry%0A%0Aexample%20:%20(%E2%88%80%20x,%20p%20x)%20%E2%86%94%20%C2%AC%20(%E2%88%83%20x,%20%C2%AC%20p%20x)%20:=%20sorry%0Aexample%20:%20(%E2%88%83%20x,%20p%20x)%20%E2%86%94%20%C2%AC%20(%E2%88%80%20x,%20%C2%AC%20p%20x)%20:=%20sorry%0Aexample%20:%20(%C2%AC%20%E2%88%83%20x,%20p%20x)%20%E2%86%94%20(%E2%88%80%20x,%20%C2%AC%20p%20x)%20:=%20sorry%0Aexample%20:%20(%C2%AC%20%E2%88%80%20x,%20p%20x)%20%E2%86%94%20(%E2%88%83%20x,%20%C2%AC%20p%20x)%20:=%20sorry%0A%0Aexample%20:%20(%E2%88%80%20x,%20p%20x%20%E2%86%92%20r)%20%E2%86%94%20(%E2%88%83%20x,%20p%20x)%20%E2%86%92%20r%20:=%20sorry%0Aexample%20:%20(%E2%88%83%20x,%20p%20x%20%E2%86%92%20r)%20%E2%86%94%20(%E2%88%80%20x,%20p%20x)%20%E2%86%92%20r%20:=%20sorry%0Aexample%20:%20(%E2%88%83%20x,%20r%20%E2%86%92%20p%20x)%20%E2%86%94%20(r%20%E2%86%92%20%E2%88%83%20x,%20p%20x)%20:=%20sorry" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kn">open</span> <span class="n">classical</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="kd">variable</span> <span class="n">a</span> <span class="o">:</span> <span class="n">&#945;</span>
<span class="kd">variable</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">,</span> <span class="n">r</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="n">r</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&#8594;</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">,</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">r</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8743;</span> <span class="n">r</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8744;</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8744;</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="bp">&#172;</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="bp">&#172;</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="bp">&#172;</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="bp">&#172;</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#172;</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="bp">&#172;</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#172;</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="bp">&#172;</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8594;</span> <span class="n">r</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="n">r</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8594;</span> <span class="n">r</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="n">r</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">r</span> <span class="bp">&#8594;</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="o">(</span><span class="n">r</span> <span class="bp">&#8594;</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>
</div>
</div><p>Notice that the declaration <code class="docutils literal"><span class="pre">variable</span> <span class="pre">a</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> amounts to the assumption that there is at least one element of type <code class="docutils literal"><span class="pre">&#945;</span></code>. This assumption is needed in the second example, as well as in the last two.</p>
<p>Here are solutions to two of the more difficult ones:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=open%20classical%0A%0Avariables%20(%CE%B1%20:%20Type)%20(p%20q%20:%20%CE%B1%20%E2%86%92%20Prop)%0Avariable%20a%20:%20%CE%B1%0Avariable%20r%20:%20Prop%0A%0A--%20BEGIN%0Aexample%20:%20(%E2%88%83%20x,%20p%20x%20%E2%88%A8%20q%20x)%20%E2%86%94%20(%E2%88%83%20x,%20p%20x)%20%E2%88%A8%20(%E2%88%83%20x,%20q%20x)%20:=%0Aiff.intro%0A%20%20(assume%20%E2%9F%A8a,%20(h1%20:%20p%20a%20%E2%88%A8%20q%20a)%E2%9F%A9,%0A%20%20%20%20or.elim%20h1%0A%20%20%20%20%20%20(assume%20hpa%20:%20p%20a,%20or.inl%20%E2%9F%A8a,%20hpa%E2%9F%A9)%0A%20%20%20%20%20%20(assume%20hqa%20:%20q%20a,%20or.inr%20%E2%9F%A8a,%20hqa%E2%9F%A9))%0A%20%20(assume%20h%20:%20(%E2%88%83%20x,%20p%20x)%20%E2%88%A8%20(%E2%88%83%20x,%20q%20x),%0A%20%20%20%20or.elim%20h%0A%20%20%20%20%20%20(assume%20%E2%9F%A8a,%20hpa%E2%9F%A9,%20%E2%9F%A8a,%20(or.inl%20hpa)%E2%9F%A9)%0A%20%20%20%20%20%20(assume%20%E2%9F%A8a,%20hqa%E2%9F%A9,%20%E2%9F%A8a,%20(or.inr%20hqa)%E2%9F%A9))%0A%0Aexample%20:%20(%E2%88%83%20x,%20p%20x%20%E2%86%92%20r)%20%E2%86%94%20(%E2%88%80%20x,%20p%20x)%20%E2%86%92%20r%20:=%0Aiff.intro%0A%20%20(assume%20%E2%9F%A8b,%20(hb%20:%20p%20b%20%E2%86%92%20r)%E2%9F%A9,%0A%20%20%20%20assume%20h2%20:%20%E2%88%80%20x,%20p%20x,%0A%20%20%20%20show%20r,%20from%20%20hb%20(h2%20b))%0A%20%20(assume%20h1%20:%20(%E2%88%80%20x,%20p%20x)%20%E2%86%92%20r,%0A%20%20%20%20show%20%E2%88%83%20x,%20p%20x%20%E2%86%92%20r,%20from%0A%20%20%20%20%20%20by_cases%0A%20%20%20%20%20%20%20%20(assume%20hap%20:%20%E2%88%80%20x,%20p%20x,%20%E2%9F%A8a,%20%CE%BB%20h',%20h1%20hap%E2%9F%A9)%0A%20%20%20%20%20%20%20%20(assume%20hnap%20:%20%C2%AC%20%E2%88%80%20x,%20p%20x,%0A%20%20%20%20%20%20%20%20%20%20by_contradiction%0A%20%20%20%20%20%20%20%20%20%20%20%20(assume%20hnex%20:%20%C2%AC%20%E2%88%83%20x,%20p%20x%20%E2%86%92%20r,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20have%20hap%20:%20%E2%88%80%20x,%20p%20x,%20from%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assume%20x,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20by_contradiction%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(assume%20hnp%20:%20%C2%AC%20p%20x,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20have%20hex%20:%20%E2%88%83%20x,%20p%20x%20%E2%86%92%20r,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20from%20%E2%9F%A8x,%20(assume%20hp,%20absurd%20hp%20hnp)%E2%9F%A9,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20show%20false,%20from%20hnex%20hex),%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20show%20false,%20from%20hnap%20hap)))%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8744;</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8744;</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">iff.intro</span>
  <span class="o">(</span><span class="k">assume</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">p</span> <span class="n">a</span> <span class="bp">&#8744;</span> <span class="n">q</span> <span class="n">a</span><span class="o">)&#10217;,</span>
    <span class="n">or.elim</span> <span class="n">h1</span>
      <span class="o">(</span><span class="k">assume</span> <span class="n">hpa</span> <span class="o">:</span> <span class="n">p</span> <span class="n">a</span><span class="o">,</span> <span class="n">or.inl</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">hpa</span><span class="o">&#10217;)</span>
      <span class="o">(</span><span class="k">assume</span> <span class="n">hqa</span> <span class="o">:</span> <span class="n">q</span> <span class="n">a</span><span class="o">,</span> <span class="n">or.inr</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">hqa</span><span class="o">&#10217;))</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8744;</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">q</span> <span class="n">x</span><span class="o">),</span>
    <span class="n">or.elim</span> <span class="n">h</span>
      <span class="o">(</span><span class="k">assume</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">hpa</span><span class="o">&#10217;,</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="o">(</span><span class="n">or.inl</span> <span class="n">hpa</span><span class="o">)&#10217;)</span>
      <span class="o">(</span><span class="k">assume</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="n">hqa</span><span class="o">&#10217;,</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="o">(</span><span class="n">or.inr</span> <span class="n">hqa</span><span class="o">)&#10217;))</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8594;</span> <span class="n">r</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="n">r</span> <span class="o">:=</span>
<span class="n">iff.intro</span>
  <span class="o">(</span><span class="k">assume</span> <span class="o">&#10216;</span><span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">p</span> <span class="n">b</span> <span class="bp">&#8594;</span> <span class="n">r</span><span class="o">)&#10217;,</span>
    <span class="k">assume</span> <span class="n">h2</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">,</span>
    <span class="k">show</span> <span class="n">r</span><span class="o">,</span> <span class="k">from</span>  <span class="n">hb</span> <span class="o">(</span><span class="n">h2</span> <span class="n">b</span><span class="o">))</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">h1</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="n">r</span><span class="o">,</span>
    <span class="k">show</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8594;</span> <span class="n">r</span><span class="o">,</span> <span class="k">from</span>
      <span class="n">by_cases</span>
        <span class="o">(</span><span class="k">assume</span> <span class="n">hap</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">,</span> <span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span> <span class="bp">&#955;</span> <span class="n">h&#39;</span><span class="o">,</span> <span class="n">h1</span> <span class="n">hap</span><span class="o">&#10217;)</span>
        <span class="o">(</span><span class="k">assume</span> <span class="n">hnap</span> <span class="o">:</span> <span class="bp">&#172;</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">,</span>
          <span class="n">by_contradiction</span>
            <span class="o">(</span><span class="k">assume</span> <span class="n">hnex</span> <span class="o">:</span> <span class="bp">&#172;</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8594;</span> <span class="n">r</span><span class="o">,</span>
              <span class="k">have</span> <span class="n">hap</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">,</span> <span class="k">from</span>
                <span class="k">assume</span> <span class="n">x</span><span class="o">,</span>
                <span class="n">by_contradiction</span>
                  <span class="o">(</span><span class="k">assume</span> <span class="n">hnp</span> <span class="o">:</span> <span class="bp">&#172;</span> <span class="n">p</span> <span class="n">x</span><span class="o">,</span>
                    <span class="k">have</span> <span class="n">hex</span> <span class="o">:</span> <span class="bp">&#8707;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8594;</span> <span class="n">r</span><span class="o">,</span>
                      <span class="k">from</span> <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="k">assume</span> <span class="n">hp</span><span class="o">,</span> <span class="n">absurd</span> <span class="n">hp</span> <span class="n">hnp</span><span class="o">)&#10217;,</span>
                    <span class="k">show</span> <span class="n">false</span><span class="o">,</span> <span class="k">from</span> <span class="n">hnex</span> <span class="n">hex</span><span class="o">),</span>
              <span class="k">show</span> <span class="n">false</span><span class="o">,</span> <span class="k">from</span> <span class="n">hnap</span> <span class="n">hap</span><span class="o">)))</span>
</pre></div>
</div>
</div></div>
<div class="section" id="more-on-the-proof-language">
<h2>4.5. More on the Proof Language<a class="headerlink" href="#more-on-the-proof-language" title="Permalink to this headline">&#182;</a></h2>
<p>We have seen that keywords like <code class="docutils literal"><span class="pre">assume</span></code>, <code class="docutils literal"><span class="pre">have</span></code>, and <code class="docutils literal"><span class="pre">show</span></code> make it possible to write formal proof terms that mirror the structure of informal mathematical proofs. In this section, we discuss some additional features of the proof language that are often convenient.</p>
<p>To start with, we can use anonymous &#8220;have&#8221; expressions to introduce an auxiliary goal without having to label it. We can refer to the last expression introduced in this way using the keyword <code class="docutils literal"><span class="pre">this</span></code>:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variable%20f%20:%20%E2%84%95%20%E2%86%92%20%E2%84%95%0Avariable%20h%20:%20%E2%88%80%20x%20:%20%E2%84%95,%20f%20x%20%E2%89%A4%20f%20(x%20+%201)%0A%0Aexample%20:%20f%200%20%E2%89%A4%20f%203%20:=%0Ahave%20f%200%20%E2%89%A4%20f%201,%20from%20h%200,%0Ahave%20f%200%20%E2%89%A4%20f%202,%20from%20le_trans%20this%20(h%201),%0Ashow%20f%200%20%E2%89%A4%20f%203,%20from%20le_trans%20this%20(h%202)" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variable</span> <span class="n">f</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span>
<span class="kd">variable</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">3</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">1</span><span class="o">,</span> <span class="k">from</span> <span class="n">h</span> <span class="mi">0</span><span class="o">,</span>
<span class="k">have</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">2</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_trans</span> <span class="n">this</span> <span class="o">(</span><span class="n">h</span> <span class="mi">1</span><span class="o">),</span>
<span class="k">show</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">3</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_trans</span> <span class="n">this</span> <span class="o">(</span><span class="n">h</span> <span class="mi">2</span><span class="o">)</span>
</pre></div>
</div>
</div><p>Often proofs move from one fact to the next, so this can be effective in eliminating the clutter of lots of labels.</p>
<p>When the goal can be inferred, we can also ask Lean instead to fill in the proof by writing <code class="docutils literal"><span class="pre">by</span> <span class="pre">assumption</span></code>:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variable%20f%20:%20%E2%84%95%20%E2%86%92%20%E2%84%95%0Avariable%20h%20:%20%E2%88%80%20x%20:%20%E2%84%95,%20f%20x%20%E2%89%A4%20f%20(x%20+%201)%0A%0Aexample%20:%20f%200%20%E2%89%A4%20f%203%20:=%0Ahave%20f%200%20%E2%89%A4%20f%201,%20from%20h%200,%0Ahave%20f%200%20%E2%89%A4%20f%202,%20from%20le_trans%20(by%20assumption)%20(h%201),%0Ashow%20f%200%20%E2%89%A4%20f%203,%20from%20le_trans%20(by%20assumption)%20(h%202)" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variable</span> <span class="n">f</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span>
<span class="kd">variable</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">3</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">1</span><span class="o">,</span> <span class="k">from</span> <span class="n">h</span> <span class="mi">0</span><span class="o">,</span>
<span class="k">have</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">2</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_trans</span> <span class="o">(</span><span class="kd">by</span> <span class="n">assumption</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="mi">1</span><span class="o">),</span>
<span class="k">show</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">3</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_trans</span> <span class="o">(</span><span class="kd">by</span> <span class="n">assumption</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="mi">2</span><span class="o">)</span>
</pre></div>
</div>
</div><p>This tells Lean to use the <code class="docutils literal"><span class="pre">assumption</span></code> tactic, which, in turn, proves the goal by finding a suitable hypothesis in the local context. We will learn more about the <code class="docutils literal"><span class="pre">assumption</span></code> tactic in the next chapter.</p>
<p>We can also ask Lean to fill in the proof by writing <code class="docutils literal"><span class="pre">&#8249;p&#8250;</span></code>, where <code class="docutils literal"><span class="pre">p</span></code> is the proposition whose proof we want Lean to find in the context.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variable%20f%20:%20%E2%84%95%20%E2%86%92%20%E2%84%95%0Avariable%20h%20:%20%E2%88%80%20x%20:%20%E2%84%95,%20f%20x%20%E2%89%A4%20f%20(x%20+%201)%0A%0A--%20BEGIN%0Aexample%20:%20f%200%20%E2%89%A5%20f%201%20%E2%86%92%20f%201%20%E2%89%A5%20f%202%20%E2%86%92%20f%200%20=%20f%202%20:=%0Aassume%20:%20f%200%20%E2%89%A5%20f%201,%0Aassume%20:%20f%201%20%E2%89%A5%20f%202,%0Ahave%20f%200%20%E2%89%A5%20f%202,%20from%20le_trans%20this%20%E2%80%B9f%200%20%E2%89%A5%20f%201%E2%80%BA,%0Ahave%20f%200%20%E2%89%A4%20f%202,%20from%20le_trans%20(h%200)%20(h%201),%0Ashow%20f%200%20=%20f%202,%20from%20le_antisymm%20this%20%E2%80%B9f%200%20%E2%89%A5%20f%202%E2%80%BA%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">&#8594;</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">2</span> <span class="bp">&#8594;</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">f</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">1</span><span class="o">,</span>
<span class="k">assume</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">2</span><span class="o">,</span>
<span class="k">have</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">2</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_trans</span> <span class="n">this</span> <span class="o">&#8249;</span><span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">1</span><span class="o">&#8250;,</span>
<span class="k">have</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">2</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_trans</span> <span class="o">(</span><span class="n">h</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="mi">1</span><span class="o">),</span>
<span class="k">show</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">f</span> <span class="mi">2</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_antisymm</span> <span class="n">this</span> <span class="o">&#8249;</span><span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">2</span><span class="o">&#8250;</span>
</pre></div>
</div>
</div><p>You can type these corner quotes using <code class="docutils literal"><span class="pre">\f&lt;</span></code> and <code class="docutils literal"><span class="pre">\f&gt;</span></code>, respectively. The letter &#8220;f&#8221; is for &#8220;French,&#8221; since the unicode symbols can also be used as French quotation marks. In fact, the notation is defined in Lean as follows:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=notation%20%60%E2%80%B9%60%20p%20%60%E2%80%BA%60%20:=%20show%20p,%20by%20assumption" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">notation</span> <span class="bp">`</span><span class="o">&#8249;</span><span class="bp">`</span> <span class="n">p</span> <span class="bp">`</span><span class="o">&#8250;</span><span class="bp">`</span> <span class="o">:=</span> <span class="k">show</span> <span class="n">p</span><span class="o">,</span> <span class="kd">by</span> <span class="n">assumption</span>
</pre></div>
</div>
</div><p>This approach is more robust than using <code class="docutils literal"><span class="pre">by</span> <span class="pre">assumption</span></code>, because the type of the assumption that needs to be inferred is given explicitly. It also makes proofs more readable. Here is a more elaborate example:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variable%20f%20:%20%E2%84%95%20%E2%86%92%20%E2%84%95%0Avariable%20h%20:%20%E2%88%80%20x%20:%20%E2%84%95,%20f%20x%20%E2%89%A4%20f%20(x%20+%201)%0A%0A--%20BEGIN%0Aexample%20:%20f%200%20%E2%89%A4%20f%203%20:=%0Ahave%20f%200%20%E2%89%A4%20f%201,%20from%20h%200,%0Ahave%20f%201%20%E2%89%A4%20f%202,%20from%20h%201,%0Ahave%20f%202%20%E2%89%A4%20f%203,%20from%20h%202,%0Ashow%20f%200%20%E2%89%A4%20f%203,%20from%20le_trans%20%E2%80%B9f%200%20%E2%89%A4%20f%201%E2%80%BA%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(le_trans%20%E2%80%B9f%201%20%E2%89%A4%20f%202%E2%80%BA%20%E2%80%B9f%202%20%E2%89%A4%20f%203%E2%80%BA)%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">3</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">1</span><span class="o">,</span> <span class="k">from</span> <span class="n">h</span> <span class="mi">0</span><span class="o">,</span>
<span class="k">have</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">2</span><span class="o">,</span> <span class="k">from</span> <span class="n">h</span> <span class="mi">1</span><span class="o">,</span>
<span class="k">have</span> <span class="n">f</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">3</span><span class="o">,</span> <span class="k">from</span> <span class="n">h</span> <span class="mi">2</span><span class="o">,</span>
<span class="k">show</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">3</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_trans</span> <span class="o">&#8249;</span><span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">1</span><span class="o">&#8250;</span>
                       <span class="o">(</span><span class="n">le_trans</span> <span class="o">&#8249;</span><span class="n">f</span> <span class="mi">1</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">2</span><span class="o">&#8250;</span> <span class="o">&#8249;</span><span class="n">f</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">3</span><span class="o">&#8250;)</span>
</pre></div>
</div>
</div><p>Keep in mind that use can use the French quotation marks in this way to refer to <em>anything</em> in the context, not just things that were introduced anonymously. Its use is also not limited to propositions, though using it for data is somewhat odd:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=example%20(n%20:%20%E2%84%95)%20:%20%E2%84%95%20:=%20%E2%80%B9%E2%84%95%E2%80%BA" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="o">:=</span> <span class="o">&#8249;</span><span class="n">&#8469;</span><span class="o">&#8250;</span>
</pre></div>
</div>
</div><p>We can also <code class="docutils literal"><span class="pre">assume</span></code> a hypothesis without giving it a label:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variable%20f%20:%20%E2%84%95%20%E2%86%92%20%E2%84%95%0Avariable%20h%20:%20%E2%88%80%20x%20:%20%E2%84%95,%20f%20x%20%E2%89%A4%20f%20(x%20+%201)%0A%0A--%20BEGIN%0Aexample%20:%20f%200%20%E2%89%A5%20f%201%20%E2%86%92%20f%200%20=%20f%201%20:=%0Aassume%20:%20f%200%20%E2%89%A5%20f%201,%0Ashow%20f%200%20=%20f%201,%20from%20le_antisymm%20(h%200)%20this%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">&#8594;</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">f</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">1</span><span class="o">,</span>
<span class="k">show</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">f</span> <span class="mi">1</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_antisymm</span> <span class="o">(</span><span class="n">h</span> <span class="mi">0</span><span class="o">)</span> <span class="n">this</span>
</pre></div>
</div>
</div><p>In contrast to the usage with <code class="docutils literal"><span class="pre">have</span></code>, an anonymous <code class="docutils literal"><span class="pre">assume</span></code> needs an extra colon. The reason is that Lean allows us to write <code class="docutils literal"><span class="pre">assume</span> <span class="pre">h</span></code> to introduce a hypothesis without specifying it, and without the colon it would be ambiguous as to whether the <code class="docutils literal"><span class="pre">h</span></code> here is meant as the label or the assumption.</p>
<p>As with the anonymous <code class="docutils literal"><span class="pre">have</span></code>, when you use an anonymous``assume`` to introduce an assumption, that assumption can also be invoked later in the proof by enclosing it in French quotes.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variable%20f%20:%20%E2%84%95%20%E2%86%92%20%E2%84%95%0Avariable%20h%20:%20%E2%88%80%20x%20:%20%E2%84%95,%20f%20x%20%E2%89%A4%20f%20(x%20+%201)%0A%0A--%20BEGIN%0Aexample%20:%20f%200%20%E2%89%A5%20f%201%20%E2%86%92%20f%201%20%E2%89%A5%20f%202%20%E2%86%92%20f%200%20=%20f%202%20:=%0Aassume%20:%20f%200%20%E2%89%A5%20f%201,%0Aassume%20:%20f%201%20%E2%89%A5%20f%202,%0Ahave%20f%200%20%E2%89%A5%20f%202,%20from%20le_trans%20%E2%80%B9f%202%20%E2%89%A4%20f%201%E2%80%BA%20%E2%80%B9f%201%20%E2%89%A4%20f%200%E2%80%BA,%0Ahave%20f%200%20%E2%89%A4%20f%202,%20from%20le_trans%20(h%200)%20(h%201),%0Ashow%20f%200%20=%20f%202,%20from%20le_antisymm%20this%20%E2%80%B9f%200%20%E2%89%A5%20f%202%E2%80%BA%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">&#8594;</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">2</span> <span class="bp">&#8594;</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">f</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">1</span><span class="o">,</span>
<span class="k">assume</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">2</span><span class="o">,</span>
<span class="k">have</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">2</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_trans</span> <span class="o">&#8249;</span><span class="n">f</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">1</span><span class="o">&#8250;</span> <span class="o">&#8249;</span><span class="n">f</span> <span class="mi">1</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">0</span><span class="o">&#8250;,</span>
<span class="k">have</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8804;</span> <span class="n">f</span> <span class="mi">2</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_trans</span> <span class="o">(</span><span class="n">h</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="mi">1</span><span class="o">),</span>
<span class="k">show</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">f</span> <span class="mi">2</span><span class="o">,</span> <span class="k">from</span> <span class="n">le_antisymm</span> <span class="n">this</span> <span class="o">&#8249;</span><span class="n">f</span> <span class="mi">0</span> <span class="bp">&#8805;</span> <span class="n">f</span> <span class="mi">2</span><span class="o">&#8250;</span>
</pre></div>
</div>
</div><p>Notice that <code class="docutils literal"><span class="pre">le_antisymm</span></code> is the assertion that if <code class="docutils literal"><span class="pre">a</span> <span class="pre">&#8804;</span> <span class="pre">b</span></code> and <code class="docutils literal"><span class="pre">b</span> <span class="pre">&#8804;</span> <span class="pre">a</span></code> then <code class="docutils literal"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">b</span></code>, and <code class="docutils literal"><span class="pre">a</span> <span class="pre">&#8805;</span> <span class="pre">b</span></code> is definitionally equal to <code class="docutils literal"><span class="pre">b</span> <span class="pre">&#8804;</span> <span class="pre">a</span></code>.</p>
</div>
<div class="section" id="exercises">
<h2>4.6. Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">&#182;</a></h2>
<ol class="arabic">
<li><p class="first">Prove these equivalences:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(%CE%B1%20:%20Type)%20(p%20q%20:%20%CE%B1%20%E2%86%92%20Prop)%0A%0Aexample%20:%20(%E2%88%80%20x,%20p%20x%20%E2%88%A7%20q%20x)%20%E2%86%94%20(%E2%88%80%20x,%20p%20x)%20%E2%88%A7%20(%E2%88%80%20x,%20q%20x)%20:=%20sorry%0Aexample%20:%20(%E2%88%80%20x,%20p%20x%20%E2%86%92%20q%20x)%20%E2%86%92%20(%E2%88%80%20x,%20p%20x)%20%E2%86%92%20(%E2%88%80%20x,%20q%20x)%20:=%20sorry%0Aexample%20:%20(%E2%88%80%20x,%20p%20x)%20%E2%88%A8%20(%E2%88%80%20x,%20q%20x)%20%E2%86%92%20%E2%88%80%20x,%20p%20x%20%E2%88%A8%20q%20x%20:=%20sorry" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8743;</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8743;</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8594;</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8744;</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8594;</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8744;</span> <span class="n">q</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>
</div>
</div><p>You should also try to understand why the reverse implication is not derivable in the last example.</p>
</li>
<li><p class="first">It is often possible to bring a component of a formula outside a universal quantifier, when it does not depend on the quantified variable. Try proving these (one direction of the second of these requires classical logic):</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(%CE%B1%20:%20Type)%20(p%20q%20:%20%CE%B1%20%E2%86%92%20Prop)%0Avariable%20r%20:%20Prop%0A%0Aexample%20:%20%CE%B1%20%E2%86%92%20((%E2%88%80%20x%20:%20%CE%B1,%20r)%20%E2%86%94%20r)%20:=%20sorry%0Aexample%20:%20(%E2%88%80%20x,%20p%20x%20%E2%88%A8%20r)%20%E2%86%94%20(%E2%88%80%20x,%20p%20x)%20%E2%88%A8%20r%20:=%20sorry%0Aexample%20:%20(%E2%88%80%20x,%20r%20%E2%86%92%20p%20x)%20%E2%86%94%20(r%20%E2%86%92%20%E2%88%80%20x,%20p%20x)%20:=%20sorry" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">&#945;</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="kd">variable</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">&#945;</span> <span class="bp">&#8594;</span> <span class="o">((</span><span class="bp">&#8704;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#945;</span><span class="o">,</span> <span class="n">r</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span> <span class="bp">&#8744;</span> <span class="n">r</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8744;</span> <span class="n">r</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">r</span> <span class="bp">&#8594;</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="bp">&#8596;</span> <span class="o">(</span><span class="n">r</span> <span class="bp">&#8594;</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>
</div>
</div></li>
<li><p class="first">Consider the &#8220;barber paradox,&#8221; that is, the claim that in a certain town there is a (male) barber that shaves all and only the men who do not shave themselves. Prove that this is a contradiction:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(men%20:%20Type)%20(barber%20:%20men)%0Avariable%20%20(shaves%20:%20men%20%E2%86%92%20men%20%E2%86%92%20Prop)%0A%0Aexample%20(h%20:%20%E2%88%80%20x%20:%20men,%20shaves%20barber%20x%20%E2%86%94%20%C2%AC%20shaves%20x%20x)%20:%0A%20%20false%20:=%20sorry" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">men</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">barber</span> <span class="o">:</span> <span class="n">men</span><span class="o">)</span>
<span class="kd">variable</span>  <span class="o">(</span><span class="n">shaves</span> <span class="o">:</span> <span class="n">men</span> <span class="bp">&#8594;</span> <span class="n">men</span> <span class="bp">&#8594;</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">men</span><span class="o">,</span> <span class="n">shaves</span> <span class="n">barber</span> <span class="n">x</span> <span class="bp">&#8596;</span> <span class="bp">&#172;</span> <span class="n">shaves</span> <span class="n">x</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">false</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>
</div>
</div></li>
<li><p class="first">Below, we have put definitions of <code class="docutils literal"><span class="pre">divides</span></code> and <code class="docutils literal"><span class="pre">even</span></code> in a special namespace to avoid conflicts with definitions in the library. The <code class="docutils literal"><span class="pre">instance</span></code> declaration make it possible to use the notation <code class="docutils literal"><span class="pre">m</span> <span class="pre">|</span> <span class="pre">n</span></code> for <code class="docutils literal"><span class="pre">divides</span> <span class="pre">m</span> <span class="pre">n</span></code>. Don&#8217;t worry about how it works; you will learn about that later.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=namespace%20hidden%0A%0Adef%20divides%20(m%20n%20:%20%E2%84%95)%20:%20Prop%20:=%20%E2%88%83%20k,%20m%20*%20k%20=%20n%0A%0Ainstance%20:%20has_dvd%20nat%20:=%20%E2%9F%A8divides%E2%9F%A9%0A%0Adef%20even%20(n%20:%20%E2%84%95)%20:%20Prop%20:=%202%20%E2%88%A3%20n%0A%0Asection%0A%20%20variables%20m%20n%20:%20%E2%84%95%0A%0A%20%20#check%20m%20%E2%88%A3%20n%0A%20%20#check%20m%5En%0A%20%20#check%20even%20(m%5En%20+3)%0Aend%0A%0Aend%20hidden" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kn">namespace</span> <span class="n">hidden</span>

<span class="kd">def</span> <span class="n">divides</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">&#8707;</span> <span class="n">k</span><span class="o">,</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">n</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_dvd</span> <span class="n">nat</span> <span class="o">:=</span> <span class="o">&#10216;</span><span class="n">divides</span><span class="o">&#10217;</span>

<span class="kd">def</span> <span class="n">even</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="mi">2</span> <span class="bp">&#8739;</span> <span class="n">n</span>

<span class="kn">section</span>
  <span class="kd">variables</span> <span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span>

  <span class="k">#check</span> <span class="n">m</span> <span class="bp">&#8739;</span> <span class="n">n</span>
  <span class="k">#check</span> <span class="n">m</span><span class="bp">^</span><span class="n">n</span>
  <span class="k">#check</span> <span class="n">even</span> <span class="o">(</span><span class="n">m</span><span class="bp">^</span><span class="n">n</span> <span class="bp">+</span><span class="mi">3</span><span class="o">)</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">hidden</span>
</pre></div>
</div>
</div><p>Remember that, without any parameters, an expression of type <code class="docutils literal"><span class="pre">Prop</span></code> is just an assertion. Fill in the definitions of <code class="docutils literal"><span class="pre">prime</span></code> and <code class="docutils literal"><span class="pre">Fermat_prime</span></code> below, and construct the given assertion. For example, you can say that there are infinitely many primes by asserting that for every natural number <code class="docutils literal"><span class="pre">n</span></code>, there is a prime number greater than <code class="docutils literal"><span class="pre">n</span></code>. Goldbach&#8217;s weak conjecture states that every odd number greater than 5 is the sum of three primes. Look up the definition of a Fermat prime or any of the other statements, if necessary.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=namespace%20hidden%0A%0Adef%20divides%20(m%20n%20:%20%E2%84%95)%20:%20Prop%20:=%20%E2%88%83%20k,%20m%20*%20k%20=%20n%0A%0Ainstance%20:%20has_dvd%20nat%20:=%20%E2%9F%A8divides%E2%9F%A9%0A%0Adef%20even%20(n%20:%20%E2%84%95)%20:%20Prop%20:=%202%20%E2%88%A3%20n%0A%0A--%20BEGIN%0Adef%20prime%20(n%20:%20%E2%84%95)%20:%20Prop%20:=%20sorry%0A%0Adef%20infinitely_many_primes%20:%20Prop%20:=%20sorry%0A%0Adef%20Fermat_prime%20(n%20:%20%E2%84%95)%20:%20Prop%20:=%20sorry%0A%0Adef%20infinitely_many_Fermat_primes%20:%20Prop%20:=%20sorry%0A%0Adef%20goldbach_conjecture%20:%20Prop%20:=%20sorry%0A%0Adef%20Goldbach's_weak_conjecture%20:%20Prop%20:=%20sorry%0A%0Adef%20Fermat's_last_theorem%20:%20Prop%20:=%20sorry%0A--%20END%0A%0Aend%20hidden" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">def</span> <span class="n">prime</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kd">def</span> <span class="n">infinitely_many_primes</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kd">def</span> <span class="n">Fermat_prime</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kd">def</span> <span class="n">infinitely_many_Fermat_primes</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kd">def</span> <span class="n">goldbach_conjecture</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kd">def</span> <span class="n">Goldbach&#39;s_weak_conjecture</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kd">def</span> <span class="n">Fermat&#39;s_last_theorem</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>
</div>
</div></li>
<li><p class="first">Prove as many of the identities listed in <a class="reference internal" href="#the-existential-quantifier"><span class="std std-numref">Section 4.4</span></a> as you can.</p>
</li>
<li><p class="first">Give a calculational proof of the theorem <code class="docutils literal"><span class="pre">log_mul</span></code> below.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=variables%20(real%20:%20Type)%20%5Bordered_ring%20real%5D%0Avariables%20(log%20exp%20:%20real%20%E2%86%92%20real)%0Avariable%20%20log_exp_eq%20:%20%E2%88%80%20x,%20log%20(exp%20x)%20=%20x%0Avariable%20%20exp_log_eq%20:%20%E2%88%80%20%7Bx%7D,%20x%20%3E%200%20%E2%86%92%20exp%20(log%20x)%20=%20x%0Avariable%20%20exp_pos%20%20%20%20:%20%E2%88%80%20x,%20exp%20x%20%3E%200%0Avariable%20%20exp_add%20%20%20%20:%20%E2%88%80%20x%20y,%20exp%20(x%20+%20y)%20=%20exp%20x%20*%20exp%20y%0A%0A--%20this%20ensures%20the%20assumptions%20are%20available%20in%20tactic%20proofs%0Ainclude%20log_exp_eq%20exp_log_eq%20exp_pos%20exp_add%0A%0Aexample%20(x%20y%20z%20:%20real)%20:%0A%20%20exp%20(x%20+%20y%20+%20z)%20=%20exp%20x%20*%20exp%20y%20*%20exp%20z%20:=%0Aby%20rw%20%5Bexp_add,%20exp_add%5D%0A%0Aexample%20(y%20:%20real)%20(h%20:%20y%20%3E%200)%20%20:%20exp%20(log%20y)%20=%20y%20:=%0Aexp_log_eq%20h%0A%0Atheorem%20log_mul%20%7Bx%20y%20:%20real%7D%20(hx%20:%20x%20%3E%200)%20(hy%20:%20y%20%3E%200)%20:%0A%20%20log%20(x%20*%20y)%20=%20log%20x%20+%20log%20y%20:=%0Asorry" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="kd">variables</span> <span class="o">(</span><span class="n">real</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">real</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">log</span> <span class="n">exp</span> <span class="o">:</span> <span class="n">real</span> <span class="bp">&#8594;</span> <span class="n">real</span><span class="o">)</span>
<span class="kd">variable</span>  <span class="n">log_exp_eq</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">log</span> <span class="o">(</span><span class="n">exp</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
<span class="kd">variable</span>  <span class="n">exp_log_eq</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="o">{</span><span class="n">x</span><span class="o">},</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="bp">&#8594;</span> <span class="n">exp</span> <span class="o">(</span><span class="n">log</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span>
<span class="kd">variable</span>  <span class="n">exp_pos</span>    <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span><span class="o">,</span> <span class="n">exp</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span>
<span class="kd">variable</span>  <span class="n">exp_add</span>    <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">exp</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">exp</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">exp</span> <span class="n">y</span>

<span class="c1">-- this ensures the assumptions are available in tactic proofs</span>
<span class="kn">include</span> <span class="n">log_exp_eq</span> <span class="n">exp_log_eq</span> <span class="n">exp_pos</span> <span class="n">exp_add</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">real</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">exp</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">z</span><span class="o">)</span> <span class="bp">=</span> <span class="n">exp</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">exp</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">exp</span> <span class="n">z</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">exp_add</span><span class="o">,</span> <span class="n">exp_add</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">real</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span>  <span class="o">:</span> <span class="n">exp</span> <span class="o">(</span><span class="n">log</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:=</span>
<span class="n">exp_log_eq</span> <span class="n">h</span>

<span class="kd">theorem</span> <span class="n">log_mul</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">real</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">log</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">log</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">log</span> <span class="n">y</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div></li>
<li><p class="first">Prove the theorem below, using only the ring properties of <code class="docutils literal"><span class="pre">&#8484;</span></code> enumerated in <a class="reference internal" href="#equality"><span class="std std-numref">Section 4.2</span></a> and the theorem <code class="docutils literal"><span class="pre">sub_self</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover.github.io/live/3.4.1/#code=#check%20sub_self%0A%0Aexample%20(x%20:%20%E2%84%A4)%20:%20x%20*%200%20=%200%20:=%0Asorry" target="_blank">
try it!</a></div><div class="highlight-lean"><div class="highlight"><pre><span class="k">#check</span> <span class="n">sub_self</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">&#8484;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>
</div>
</div></li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Theorem Proving in Lean</a></h1>








<!-- <h3>Navigation</h3> -->
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="dependent_type_theory.html">2. Dependent Type Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="propositions_and_proofs.html">3. Propositions and Proofs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. Quantifiers and Equality</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-universal-quantifier">4.1. The Universal Quantifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="#equality">4.2. Equality</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calculational-proofs">4.3. Calculational Proofs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-existential-quantifier">4.4. The Existential Quantifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="#more-on-the-proof-language">4.5. More on the Proof Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercises">4.6. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tactics.html">5. Tactics</a></li>
<li class="toctree-l1"><a class="reference internal" href="interacting_with_lean.html">6. Interacting with Lean</a></li>
<li class="toctree-l1"><a class="reference internal" href="inductive_types.html">7. Inductive Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="induction_and_recursion.html">8. Induction and Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="structures_and_records.html">9. Structures and Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="type_classes.html">10. Type Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="axioms_and_computation.html">11. Axioms and Computation</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="theorem_proving_in_lean.pdf">PDF version</a></li>
    
    <li class="toctree-l1"><a href="https://leanprover.github.io/">Lean Home</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Jeremy Avigad, Leonardo de Moura, and Soonho Kong.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/quantifiers_and_equality.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>